<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>OpenCV 学习笔记(6) Filtering the Images | Ocxs&#39;s blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="In this chapter, we will cover:


Filtering images using low-pass filters
Filtering images using a median filter
Applying directional filters to detect edges
Computing the Laplacian of an image">
<meta property="og:type" content="article">
<meta property="og:title" content="OpenCV 学习笔记(6) Filtering the Images">
<meta property="og:url" content="site:ocxsBlog.github.io/2015/11/19/151119-OpenCV-Filtering-the-Images/index.html">
<meta property="og:site_name" content="Ocxs's blog">
<meta property="og:description" content="In this chapter, we will cover:


Filtering images using low-pass filters
Filtering images using a median filter
Applying directional filters to detect edges
Computing the Laplacian of an image">
<meta property="og:updated_time" content="2015-11-25T13:34:46.101Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="OpenCV 学习笔记(6) Filtering the Images">
<meta name="twitter:description" content="In this chapter, we will cover:


Filtering images using low-pass filters
Filtering images using a median filter
Applying directional filters to detect edges
Computing the Laplacian of an image">
  
    <link rel="alternative" href="/atom.xml" title="Ocxs&#39;s blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="/img/avatar.png" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">ocxs</a></h1>
		</hgroup>

		
		<p class="header-subtitle">To be better</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						
						<li>关于我</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/Computer-Vision/" style="font-size: 15px;">Computer Vision</a> <a href="/tags/OpenCV/" style="font-size: 15px;">OpenCV</a> <a href="/tags/PAT/" style="font-size: 20px;">PAT</a> <a href="/tags/PAT-data-structure/" style="font-size: 20px;">PAT data structure</a> <a href="/tags/data-structure/" style="font-size: 10px;">data structure</a>
					</div>
				</section>
				
				
				

				
				
				<section class="switch-part switch-part3">
				
					<div id="js-aboutme">Computer Vision.</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">ocxs</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="/img/avatar.png" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">ocxs</h1>
			</hgroup>
			
			<p class="header-subtitle">To be better</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap"><article id="post-151119-OpenCV-Filtering-the-Images" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/11/19/151119-OpenCV-Filtering-the-Images/" class="article-date">
  	<time datetime="2015-11-19T12:14:57.000Z" itemprop="datePublished">2015-11-19</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      OpenCV 学习笔记(6) Filtering the Images
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Computer-Vision/">Computer Vision</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/OpenCV/">OpenCV</a></li></ul>
	</div>

        

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
	  <!-- Table of Contents -->
		
		  <div id="toc" class="toc-article">
			<strong class="toc-title">Table of Contents</strong>
			<ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Introduction"><span class="toc-number">1.</span> <span class="toc-text">Introduction</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Filtering_images_using_low-pass_filters"><span class="toc-number">2.</span> <span class="toc-text">Filtering images using low-pass filters</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#箱式滤波器cv::blur"><span class="toc-number">2.1.</span> <span class="toc-text">箱式滤波器cv::blur</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#高斯滤波cv::GaussianBlur"><span class="toc-number">2.2.</span> <span class="toc-text">高斯滤波cv::GaussianBlur</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#金字塔"><span class="toc-number">2.3.</span> <span class="toc-text">金字塔</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Filtering_images_using_a_median_filter"><span class="toc-number">3.</span> <span class="toc-text">Filtering images using a median filter</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Applying_directional_filters_to_detect_edges"><span class="toc-number">4.</span> <span class="toc-text">Applying directional filters to detect edges</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Sobel算子"><span class="toc-number">4.1.</span> <span class="toc-text">Sobel算子</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#示例"><span class="toc-number">4.1.1.</span> <span class="toc-text">示例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#作用原理"><span class="toc-number">4.1.2.</span> <span class="toc-text">作用原理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#其他的梯度算子"><span class="toc-number">4.2.</span> <span class="toc-text">其他的梯度算子</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Prewitt_operator"><span class="toc-number">4.2.1.</span> <span class="toc-text">Prewitt operator</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Roberts_operator"><span class="toc-number">4.2.2.</span> <span class="toc-text">Roberts operator</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Scharr_operator"><span class="toc-number">4.2.3.</span> <span class="toc-text">Scharr operator</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Computing_the_Laplacian_of_an_image"><span class="toc-number">5.</span> <span class="toc-text">Computing the Laplacian of an image</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#数学原理"><span class="toc-number">5.1.</span> <span class="toc-text">数学原理</span></a></li></ol></li></ol>
		  </div>
		
        <p>In this chapter, we will cover:</p>
<blockquote>
<ul>
<li>Filtering images using low-pass filters</li>
<li>Filtering images using a median filter</li>
<li>Applying directional filters to detect edges</li>
<li>Computing the Laplacian of an image<a id="more"></a>
</li>
</ul>
</blockquote>
<h1 id="Introduction"><strong>Introduction</strong></h1><p>　　Observing the frequency of those variations in an image constitutes another way of characterizing an image. This point of view is referred to as the <strong>frequency domain</strong>(频域), while characterizing an image by observing its gray-level distribution is referred to as the <strong>spatial domain</strong>(空间域).<br>　　由上面可知，频域是分析图像强度(intensity)的变化,空间域分析图像灰度的分布;那么在频域中去分析图像，高频信息是有图像强度的快速变化产生，一般对应图像的边缘信息，因为在边缘图像强度才会变化很快， 那么对应的低频信息多是图像中某一块区域，如上一章那个牛的图片中的背景区域，或者前景区域(牛)，不会陡变，所以是低频信息，但是从牛到背景的 这个边缘，就会发生陡变，那么对应高频。</p>
<p>　　图像是二维的，它包含垂直频率(垂直方向的变化)和水平频率(水平方向的变化)。</p>
<p>　　而滤波(Filtering)的作用就是增强部分频段，同时限制(或衰减)其他频段。<strong>Low-pass</strong>(低通)滤波器就是消除图像中高频信息，<strong>High-pass</strong>(高通)滤波器就是去除低频成分，让高频成分通过。</p>
<p>　　本章主要讲述用于图像处理的滤波器。</p>
<hr>
<h1 id="Filtering_images_using_low-pass_filters"><strong>Filtering images using low-pass filters</strong></h1><h2 id="箱式滤波器cv::blur"><strong>箱式滤波器cv::blur</strong></h2><p>　　如书上所说，low-pass滤波器去除高频信息，那么就是想降低图像变化的幅度。OpenCV中实现该功能的函数是<code>cv::blur</code>,作用是将每个像素替换为相邻矩形内像素的平均值，从而实现平滑。也称<code>cv::blur</code>为boxFilter(箱式滤波器)。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cv::blur(image, result, cv::Size(<span class="number">5</span>, <span class="number">5</span>), anchor, borderType);</span><br><span class="line">cv::boxFilter(image, result, src.type(), anchor, <span class="literal">true</span>, borderType);</span><br></pre></td></tr></table></figure></p>
<p>　　上面两个等价，当<code>cv::boxFilter</code>的第五个参数为true，第三个参数设定输出与输入类型一致，她就是均值滤波，第五个参数为false，则相当于把公式(1)前面的系数去掉，<code>cv::blur</code>第三个参数是定义kernel的大小，kernel是一个N*N的矩阵, 如公式(1)所示，anchor 默认是矩阵中心， See more in <a href="http://docs.opencv.org/2.4.9/modules/imgproc/doc/filtering.html?highlight=blur#blur" target="_blank" rel="external">cv::blur</a> and <a href="http://docs.opencv.org/2.4.9/modules/imgproc/doc/filtering.html#boxfilter" target="_blank" rel="external">cv::boxFilter</a>.</p>
<p>\begin{equation}<br>K=\frac{1}{ksize.width*ksize.height}<br>\begin{bmatrix}<br>1&amp;1&amp; \cdots &amp;1&amp;1&amp; \\<br>1&amp;1&amp; \cdots &amp;1&amp;1&amp; \\<br>&amp;&amp; \cdots \cdots \cdots &amp; \\<br>1&amp;1&amp; \cdots &amp;1&amp;1&amp;<br>\end{bmatrix}    \tag{1}<br>\end{equation} </p>
<h2 id="高斯滤波cv::GaussianBlur"><strong>高斯滤波cv::GaussianBlur</strong></h2><ul>
<li><strong>OpenCV 函数调用</strong></li>
</ul>
<p>　　 有些情况，需要对靠近的像素分配更多的权重，常用的加权方案是基于高斯函数(Gaussian Function),OpenCV中实现该功能的函数<code>cv::GaussianBlur</code>:<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cv::GaussianBlur(image,result,cv::Size(<span class="number">5</span>,<span class="number">5</span>),<span class="number">1.5</span>);</span><br></pre></td></tr></table></figure></p>
<ul>
<li><strong>数学原理</strong></li>
</ul>
<p>　　在高斯滤波器中，像素的权重和它离开中心像素点距离成正比。一维高斯函数的形式如公式(2)所示: </p>
<p>\begin{equation}<br>G(x) = Ae^{-x^2/2\sigma^2}    \tag{2}<br>\end{equation} </p>
<p>　　归一化系数A使得不同权重之和为1，σ来控制高斯函数的高度(高斯函数就是以前学的正态分布的那个函数，所以正态分布也叫高斯分布)，这个值越大，生成的函数越平坦，越小，越抖。(可以说σ是描述数据分布的离散程度，σ越大，数据越分散，σ越小，数据越集中，而学正态分布也知道σ代表方差，方差小数据自然就集中的平均数μ附近，也恰好说明函数图像为何很抖)。<br>　　正太分布里有个3σ原则，也能说明为啥他能控制高斯函数的高度：P（μ-σ&lt;X≤μ+σ）=68.3%；P（μ-2σ&lt;X≤μ+2σ）=95.4%；P（μ-3σ&lt;X≤μ+3σ）=99.7%；  </p>
<p>　　OpenCV提供<code>cv::getGaussianKernel</code>函数根据提供的σ来计算系数：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cv::Mat gauss= cv::getGaussianKernel(<span class="number">9</span>,sigma,CV_32F);</span><br></pre></td></tr></table></figure></p>
<p>不同的σ计算出来的系数自然也就不一样，这里列出书上的例子：<br>(a)σ = 0.5<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">0.0</span> <span class="number">0.0</span> <span class="number">0.00026</span> <span class="number">0.10645</span> <span class="number">0.78657</span> <span class="number">0.10645</span> <span class="number">0.00026</span> <span class="number">0.0</span> <span class="number">0.0</span>]</span><br></pre></td></tr></table></figure></p>
<p>(b)σ = 1.5<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">0.00761</span> <span class="number">0.036075</span> <span class="number">0.10959</span> <span class="number">0.21345</span> <span class="number">0.26666</span> <span class="number">0.21345</span> <span class="number">0.10959</span> <span class="number">0.03608</span> <span class="number">0.00761</span> ]</span><br></pre></td></tr></table></figure></p>
<p>　　这里可以参考这篇文章：<a href="http://wenku.baidu.com/view/674d13c1d5bbfd0a7956738b.html" target="_blank" rel="external">深入剖析高斯滤波</a>，文中指出：</p>
<p>　　在图像处理中，高斯滤波一般有两种实现方式，一种是离散化的滑动窗口进行卷积运算，另一种是通过傅立叶变化来实现。最常见的就是第一种卷积核实现，只有当离散化的窗口非常大，计算非常耗时（这时可使用可分离滤波器）的情况下，可能会考虑基于傅里叶变换的实现方法。这里我们只讨论第一种方法。</p>
<p>　　我们可以看到这篇文章的那个图，二维高斯函数可以用matlab仿真出来，网上有许多这样的代码。文中说：离散化的主旨就是保留高斯函数中心能量最集中的中间部分，忽略四周能量很小的平坦区域。这就可以为离中心像素近的权重大，离得远的权重小。</p>
<ul>
<li>这里重点把文中的第三个问题摘抄出来：<strong>为什么使用可分离滤波器？</strong></li>
</ul>
<p>　　即书上为啥不直接用二维高斯函数来滤波，而是用一维高斯函数，先对图像的行用一维高斯滤波器(影响垂直方向的频率)，在对图像的列应用相同的一维高斯滤波器(影响的是水平方向的频率)，处理结果一样，利用的是高斯函数可以写成可分离的形式(Gaussian filter is a <strong>separable filter</strong>)，因此可以采用可分离滤波器实现来加速。所谓的可分离滤波器，就是可以把多维的卷积化成多个一维卷积。具体到二维的高斯滤波，就是指先对行做一维卷积，再对列做一维卷积。这样就可以将计算复杂度从O(M*M*N*N)降到O(2*M*M*N)，M，N分别是图像和滤波器的窗口大小，具体为啥如果以后回头看这篇文章的我想不出来先打自己一下，然后去看文章的链接。(对当初学信号与系统时的一些东西稍微理解的更深一点，以前只会计算题目。。。)</p>
<p>　　在OpenCV中可以调用<code>cv::sepFilter2D</code>来使用分离的滤波器，怎么使用，看一眼文档立马就会了，见<a href="http://docs.opencv.org/2.4.9/modules/imgproc/doc/filtering.html#sepfilter2d" target="_blank" rel="external">cv::sepFilter2D</a>.这里书上还说了一个函数<code>cv::filter2D</code>,可以使用它来直接进行二维滤波,具体使用见<a href="http://ocxsblog.github.io/2015/10/26/151026-OpenCV-Manipulating-the-pixels-2/">OpenCV 学习笔记(2) Manipulating the Pixels (下)</a>.<br>　　在使用<code>cv::GaussianBlur</code>函数时，第三个参数Size，<strong>长宽必须是奇数</strong>，此外，如果size为0，函数将根据第四个参数σ自动确定较为合适的系数的数量，至于怎么确定的，参考前面链接里的那篇文章，里面有把OPenCV源码拿出来讲解。此外，反过来提供尺寸的值，设置σ为0，函数也能自动确定较好的σ值。</p>
<h2 id="金字塔"><strong>金字塔</strong></h2><p>　　再将图像按照2的倍数缩放时，由于原来图像中的高频分量(如尖锐的边缘)在缩小图中可能呈现出楼梯状，造成失真，为了使缩小后没有这样的情况，那么就先对原图像进行低通滤波，然后在缩小，OpenCV就提供这样的函数，<code>cv::pyrDown</code>:<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cv::Mat reducedImage;</span><br><span class="line">cv::pyrDown(image, reducedImage);</span><br></pre></td></tr></table></figure></p>
<p>　　<code>cv::pyrDown</code>做了两件事，先对原图像进行低通滤波，然后隔行隔列的去除<strong>偶数行</strong>像素(官网说的，见<a href="http://docs.opencv.org/2.4.9/modules/imgproc/doc/filtering.html#pyrdown" target="_blank" rel="external">cv::pyrDown</a>)，缩小为原来的一半。与之对应的函数叫<code>cv::pyrUp</code>,他们经常用来创建图像金字塔(<strong>image pyramids</strong>)。<strong>常常用于高效的图像分析</strong>，例如想要检测图像中的物体，首先在金字塔顶层的小尺寸图像进行检测，然后定位感兴趣的物体，并在包含高分辨图像的低层金字塔中进行更精确的搜索。此外改变图像尺寸也可以使用<code>cv::resize</code>.</p>
<hr>
<h1 id="Filtering_images_using_a_median_filter"><strong>Filtering images using a median filter</strong></h1><p>　　上一节说的都隶属于线性滤波器的范畴，这一节的中值滤波器就是非线性滤波器。中值滤波器对去除椒盐噪点(Salt-and-Pepper,前面的章节讲过)很有帮助，OpenCV的函数是<code>cv::medianBlur</code>:<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cv::medianBlur(image, result, <span class="number">5</span>);</span><br></pre></td></tr></table></figure></p>
<p>　　由于他是非线性的，无法表示成之前的矩阵形式(因为取中位数，不确定性)，她就是用相邻区域内的中值来替代当前的像素值。这也是为啥能对付椒盐噪点，突然冒出来的黑色或白色必然不会是中位数，早晚被替换掉，因为噪点只能改变平均数，但是改变不了中位数，除非他们聚集在一起很多，不过这也可能就不是噪点了。函数的第三个参数是确定相邻区域的大小(kSize*ksize的区域)，必须是<strong>大于1且为奇数</strong>。中值滤波同时还具有保留边缘锐利度的优点，还能去除相同区域中的纹理。(这里还需注意使用medianBlur的时候，需要注意输入的要求，具体见<a href="http://docs.opencv.org/2.4.9/modules/imgproc/doc/filtering.html?highlight=medianblur#cv2.medianBlur" target="_blank" rel="external">cv::medianBlur</a>)</p>
<hr>
<h1 id="Applying_directional_filters_to_detect_edges"><strong>Applying directional filters to detect edges</strong></h1><p>　　之前主要讲的是低通滤波，接下来说高通滤波，经常用来做边缘检测(<strong>edge detection</strong>);</p>
<h2 id="Sobel算子"><strong>Sobel算子</strong></h2><h3 id="示例"><strong>示例</strong></h3><p>　　具有方向性，根据使用的kernel的不同，只改变图像的水平或垂直频率。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Sobel</span><span class="params">(InputArray src, OutputArray dst, <span class="keyword">int</span> ddepth, <span class="keyword">int</span> dx, <span class="keyword">int</span> dy, <span class="keyword">int</span> ksize=<span class="number">3</span>, <span class="keyword">double</span> scale=<span class="number">1</span>, <span class="keyword">double</span> delta=<span class="number">0</span>, <span class="keyword">int</span> borderType=BORDER_DEFAULT )</span></span>;</span><br></pre></td></tr></table></figure></p>
<p>　　<code>dx=1,dy=0</code>是针对水平方向的滤波，<code>dx=0,dy=1</code>是针对垂直方向的滤波；ksize必须是1，3，5 or 7，当是1时，代表一维的意思，即3x1或1x3的核,如[-1, 0, 1] 和 [-1, 0, 1]的转置，其他数字代表的就是ksize*ksize的核；其他比如输出的类型等等具体参考 <a href="http://docs.opencv.org/2.4.9/modules/imgproc/doc/filtering.html#sobel" target="_blank" rel="external">cv::Sobel</a>.</p>
<p>　　书上给的例子还是蛮好玩的，<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cv::Sobel(image,sobelX,CV_8U,<span class="number">1</span>,<span class="number">0</span>,<span class="number">3</span>,<span class="number">0.4</span>,<span class="number">128</span>);	<span class="comment">//horizontal directions.</span></span><br><span class="line">cv::Sobel(image,sobelY,CV_8U,<span class="number">0</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">0.4</span>,<span class="number">128</span>);	<span class="comment">//vertical directions.</span></span><br></pre></td></tr></table></figure></p>
<p>　　有意思的是后面的偏移量，将本来的得到的负值变成了低于128的正值，而原本的正值变成大于128的正值，这样的结果看起来有种书上所说的浮雕特效。</p>
<p>　　书上又给了一个将水平和垂直方向结合的例子：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Compute norm of Sobel</span></span><br><span class="line">cv::Sobel(image,sobelX,CV_16S,<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line">cv::Sobel(image,sobelY,CV_16S,<span class="number">0</span>,<span class="number">1</span>);</span><br><span class="line">cv::Mat sobel;</span><br><span class="line"><span class="comment">//compute the L1 norm</span></span><br><span class="line">sobel= <span class="built_in">abs</span>(sobelX)+<span class="built_in">abs</span>(sobelY);</span><br><span class="line"></span><br><span class="line"><span class="keyword">double</span> sobmin, sobmax;</span><br><span class="line">cv::minMaxLoc(sobel,&amp;sobmin,&amp;sobmax);</span><br><span class="line"><span class="comment">// Conversion to 8-bit image</span></span><br><span class="line"><span class="comment">// sobelImage = -alpha*sobel + 255</span></span><br><span class="line">cv::Mat sobelImage;</span><br><span class="line">sobel.convertTo(sobelImage,CV_8U,-<span class="number">255.</span>/sobmax,<span class="number">255</span>);</span><br></pre></td></tr></table></figure></p>
<p>　　得到的结果还是挺美的，通过convertTo将所有的值映射到0~255范围内。从这幅图像就能看出为何将其边缘检测器。</p>
<hr>
<h3 id="作用原理"><strong>作用原理</strong></h3><p>　　sobel 算子3x3的核如下公式(3):水平方向，(4):垂直方向 所示：</p>
<p>\begin{equation}<br>horizontal(kernel) =<br>\begin{bmatrix}<br>-1&amp;0&amp;1 \\<br>-2&amp;0&amp;2 \\<br>-1&amp;0&amp;1<br>\end{bmatrix}    \tag{3}<br>\end{equation} </p>
<p>\begin{equation}<br>vertical(kernel) =<br>\begin{bmatrix}<br>-1&amp;-2&amp;-1 \\<br>0&amp;0&amp;0 \\<br>1&amp;2&amp;1<br>\end{bmatrix}    \tag{4}<br>\end{equation} </p>
<p>　　sobel算子可以认为是用来测量图像垂直和水平方向变化，这种变化叫梯度(gradient).</p>
<p>\begin{equation}<br>grad(I) =<br>{\begin{bmatrix}<br>\frac{\partial I}{\partial x}, \frac{\partial I}{\partial y}<br>\end{bmatrix}}^\mathrm{T}    \tag{5}<br>\end{equation} </p>
<p>　　公式虽说是求偏导，实际就是像素值求差分，这里是一阶差分，举例说明如下，为了更好的说明问题，用矩阵来替代图像，这样更加直观，毕竟图像就是矩阵：</p>
<p>\begin{equation}<br>src =<br>\begin{bmatrix}<br>0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0 \\<br>0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0 \\<br>0&amp;0&amp;1&amp;1&amp;1&amp;1&amp;1&amp;0&amp;0 \\<br>0&amp;0&amp;1&amp;1&amp;1&amp;1&amp;1&amp;0&amp;0 \\<br>0&amp;0&amp;1&amp;1&amp;1&amp;1&amp;1&amp;0&amp;0 \\<br>0&amp;0&amp;1&amp;1&amp;1&amp;1&amp;1&amp;0&amp;0 \\<br>0&amp;0&amp;1&amp;1&amp;1&amp;1&amp;1&amp;0&amp;0 \\<br>0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0 \\<br>0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0<br>\end{bmatrix}    \tag{6}<br>\end{equation} </p>
<p>　　这里使用的sobel算子如公式(3)(4)所示，得到的结果分别如下(7)(8)所示：</p>
<p>\begin{equation}<br>dst_x =<br>\begin{bmatrix}<br>0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0 \\<br>0&amp;1&amp;1&amp;0&amp;0&amp;0&amp;-1&amp;-1&amp;0 \\<br>0&amp;3&amp;3&amp;0&amp;0&amp;0&amp;-3&amp;-3&amp;0 \\<br>0&amp;4&amp;4&amp;0&amp;0&amp;0&amp;-4&amp;-4&amp;0 \\<br>0&amp;4&amp;4&amp;0&amp;0&amp;0&amp;-4&amp;-4&amp;0 \\<br>0&amp;4&amp;4&amp;0&amp;0&amp;0&amp;-4&amp;-4&amp;0 \\<br>0&amp;3&amp;3&amp;0&amp;0&amp;0&amp;-3&amp;-3&amp;0 \\<br>0&amp;1&amp;1&amp;0&amp;0&amp;0&amp;-1&amp;-1&amp;0 \\<br>0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0<br>\end{bmatrix}    \tag{7}<br>\end{equation} </p>
<p>\begin{equation}<br>dst_y =<br>\begin{bmatrix}<br>0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0 \\<br>0&amp;1&amp;3&amp;4&amp;4&amp;4&amp;3&amp;1&amp;0 \\<br>0&amp;1&amp;3&amp;4&amp;4&amp;4&amp;3&amp;1&amp;0 \\<br>0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0 \\<br>0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0 \\<br>0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0 \\<br>0&amp;-1&amp;-3&amp;-4&amp;-4&amp;-4&amp;-3&amp;-1&amp;0 \\<br>0&amp;-1&amp;-3&amp;-4&amp;-4&amp;-4&amp;-3&amp;-1&amp;0 \\<br>0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0<br>\end{bmatrix}    \tag{8}<br>\end{equation} </p>
<p>　　就是将核与原图像做卷积，然后得到的值替换原像素值即可。从矩阵的结果中也能看出为何之前说有负值。</p>
<p>　　图像的梯度是一个二维向量，如公式(5)所示，它拥有距离和方向，梯度向量的距离通常给出变化的幅度，通常使用欧拉距离(也称L2 norm)：</p>
<p>\begin{equation}<br>\left|grad(I)\right| =<br>\sqrt{<br>{\left(\frac{\partial I}{\partial x}\right)}^2 + {\left(\frac{\partial I}{\partial y}\right)}^2<br>}    \tag{9}<br>\end{equation} </p>
<p>　　由于L2 norm的计算费时，所以经常有L1 norm替代，即取绝对值：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sobel= <span class="built_in">abs</span>(sobelX)+<span class="built_in">abs</span>(sobelY);</span><br></pre></td></tr></table></figure></p>
<p>　　梯度向量总是指向变化最剧烈的方向，在图像中， 这意味着梯度向量总是与边缘正交，从暗处指向亮出。梯度的方向是：</p>
<p>\begin{equation}<br>\angle grad(I) = arctan \left(-\frac{\partial I}{\partial y} \bigg/ \frac{\partial I}{\partial x} \right)    \tag{10}<br>\end{equation} </p>
<p>　　如果不仅需要计算距离，还需要方向，则用<code>cv::cartToPolar</code></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Sobel must be computed in floating points</span></span><br><span class="line">cv::Sobel(image,sobelX,CV_32F,<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line">cv::Sobel(image,sobelY,CV_32F,<span class="number">0</span>,<span class="number">1</span>);</span><br><span class="line"><span class="comment">// Compute the L2 norm and direction of the gradient</span></span><br><span class="line">cv::Mat norm, dir;</span><br><span class="line">cv::cartToPolar(sobelX,sobelY,norm,dir);</span><br></pre></td></tr></table></figure>
<p>　　这里默认方向的单位是弧度(from 0 to 2*Pi)，将额外的参数angleInDegrees设为true，即可得到角度(0 to 360 degrees), see more in <a href="http://docs.opencv.org/2.4.9/modules/core/doc/operations_on_arrays.html?highlight=carttopolar#void cartToPolar(InputArray x, InputArray y, OutputArray magnitude, OutputArray angle, bool angleInDegrees" target="_blank" rel="external">cv::cartToPolar</a>).</p>
<p>　　对于梯度图阈值化即可得到二值的边缘图，合适的阈值很难，一种可选的途径是磁滞阈值化(hysteresis thresholding)的概念,将canny算子会用到。</p>
<h2 id="其他的梯度算子"><strong>其他的梯度算子</strong></h2><h3 id="Prewitt_operator"><strong>Prewitt operator</strong></h3><p>\begin{equation}<br>horizontal(kernel) =<br>\begin{bmatrix}<br>-1&amp;0&amp;1 \\<br>-1&amp;0&amp;1 \\<br>-1&amp;0&amp;1<br>\end{bmatrix}    \tag{11}<br>\end{equation} </p>
<p>\begin{equation}<br>vertical(kernel) =<br>\begin{bmatrix}<br>-1&amp;-1&amp;-1 \\<br>0&amp;0&amp;0 \\<br>1&amp;1&amp;1<br>\end{bmatrix}    \tag{12}<br>\end{equation} </p>
<h3 id="Roberts_operator"><strong>Roberts operator</strong></h3><p>\begin{equation}<br>\begin{bmatrix}<br>1&amp;0 \\<br>0&amp;-1<br>\end{bmatrix}    \tag{13}<br>\end{equation} </p>
<p>\begin{equation}<br>\begin{bmatrix}<br>0&amp;1 \\<br>-1&amp;0<br>\end{bmatrix}    \tag{14}<br>\end{equation} </p>
<h3 id="Scharr_operator"><strong>Scharr operator</strong></h3><p>\begin{equation}<br>horizontal(kernel) =<br>\begin{bmatrix}<br>-3&amp;0&amp;3 \\<br>-10&amp;0&amp;10 \\<br>-3&amp;0&amp;3<br>\end{bmatrix}    \tag{15}<br>\end{equation} </p>
<p>\begin{equation}<br>vertical(kernel) =<br>\begin{bmatrix}<br>-3&amp;-10&amp;-3 \\<br>0&amp;0&amp;0 \\<br>3&amp;10&amp;3<br>\end{bmatrix}    \tag{16}<br>\end{equation} </p>
<p>　　当<code>cv::Sobel</code>的ksize参数为<code>CV_SCHARR</code>时,他们二者等价，如下所示：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cv::Sobel (image, sobelX,  CV_16S, <span class="number">1</span>, <span class="number">0</span>, CV_SCHARR);</span><br><span class="line">cv::Scharr(image, scharrX, CV_16S, <span class="number">1</span>, <span class="number">0</span>, <span class="number">3</span>);</span><br></pre></td></tr></table></figure></p>
<hr>
<h1 id="Computing_the_Laplacian_of_an_image"><strong>Computing the Laplacian of an image</strong></h1><p>　　Laplacian 是另一种基于图像导数的高通线性滤波器，他计算二阶导数以衡量图像的弯曲度，从而得到边缘。</p>
<h2 id="数学原理"><strong>数学原理</strong></h2><p>　　Laplacian算子是一种各向同性算子，二阶微分算子，在只关心边缘而不考虑其周围像素灰度差值时比较适合。Laplacian算子对孤立像素的响应比对边缘或线的响应更加强烈，这一点可参见公式(17)看出，所以适合无噪声图像，如果有噪声，应先进行低通滤波去噪，然后在应用Laplacian算子。</p>
<p>\begin{equation}<br>\begin{bmatrix}<br>0&amp;1&amp;0 \\<br>1&amp;-4&amp;1 \\<br>0&amp;1&amp;0<br>\end{bmatrix}    \tag{17}<br>\end{equation}</p>
<p>　　Laplacian算子具有旋转不变形，根据公式(17)的3x3的核，(一般如果我们不在意速度时，多用7x7核)我们可以定义：<br>\begin{equation}<br>\triangledown^{2} f(x,y)= &amp;{[f(x+1,y)-f(x,y)]-[f(x,y)-f(x-1,y)]}+{[f(x,y+1)-f(x,y)]-[f(x,y)-f(x,y-1)]} \\&amp; = f(x+1,y)+f(x-1,y)+f(x,y+1)+f(x,y-1)-4f(x,y) \tag{17}<br>\end{equation}</p>
<p>　　公式(18)在图像处理中更好理解，在数学上，如下所示：</p>
<p>\begin{equation}<br>\triangledown^{2} f = \frac{\partial^{2} f}{\partial x^{2}}+\frac{\partial^{2} f}{\partial y^{2}} \tag{19}<br>\end{equation}</p>
<p>　　由于Laplacian算子度量的是图像的弯曲度(curvature)，所以在平坦区域等于0。</p>
<p>　　边缘的存在是不同灰度区域间快速过度的结果，沿着图像在一条边上的变化(例如， 从暗处到亮处)， 可以观察到灰度的提升意味着正曲率(强度值开始上升)到负曲率(当强度值到达最高值)的渐变。所以正负Laplacian算子值(或导数)是用来指示边缘存在的标志。书上那个图可以诠释这一点。</p>
<p>　　这里再来举个例子，帮助自己以后复习更快理解：<br>原矩阵如下：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">26</span>, <span class="number">27</span>, <span class="number">28</span>, <span class="number">29</span>, <span class="number">30</span>, <span class="number">31</span>, <span class="number">32</span>, <span class="number">33</span>, <span class="number">102</span>, <span class="number">105</span>, <span class="number">108</span>, <span class="number">111</span>, <span class="number">114</span>, <span class="number">117</span>, <span class="number">120</span>, <span class="number">123</span>, <span class="number">42</span>, <span class="number">43</span>, <span class="number">44</span>, <span class="number">45</span>, <span class="number">46</span>, <span class="number">47</span>, <span class="number">48</span>, <span class="number">49</span>, <span class="number">50</span>, </span><br><span class="line"><span class="number">27</span>, <span class="number">28</span>, <span class="number">29</span>, <span class="number">30</span>, <span class="number">31</span>, <span class="number">32</span>, <span class="number">33</span>, <span class="number">34</span>, <span class="number">105</span>, <span class="number">108</span>, <span class="number">111</span>, <span class="number">114</span>, <span class="number">117</span>, <span class="number">120</span>, <span class="number">123</span>, <span class="number">126</span>, <span class="number">43</span>, <span class="number">44</span>, <span class="number">45</span>, <span class="number">46</span>, <span class="number">47</span>, <span class="number">48</span>, <span class="number">49</span>, <span class="number">50</span>, <span class="number">51</span>, </span><br><span class="line"><span class="number">28</span>, <span class="number">29</span>, <span class="number">30</span>, <span class="number">31</span>, <span class="number">32</span>, <span class="number">33</span>, <span class="number">34</span>, <span class="number">35</span>, <span class="number">108</span>, <span class="number">111</span>, <span class="number">114</span>, <span class="number">117</span>, <span class="number">120</span>, <span class="number">123</span>, <span class="number">126</span>, <span class="number">129</span>, <span class="number">44</span>, <span class="number">45</span>, <span class="number">46</span>, <span class="number">47</span>, <span class="number">48</span>, <span class="number">49</span>, <span class="number">50</span>, <span class="number">51</span>, <span class="number">52</span>, </span><br><span class="line"><span class="number">29</span>, <span class="number">30</span>, <span class="number">31</span>, <span class="number">32</span>, <span class="number">33</span>, <span class="number">34</span>, <span class="number">35</span>, <span class="number">36</span>, <span class="number">111</span>, <span class="number">114</span>, <span class="number">117</span>, <span class="number">120</span>, <span class="number">123</span>, <span class="number">126</span>, <span class="number">129</span>, <span class="number">132</span>, <span class="number">45</span>, <span class="number">46</span>, <span class="number">47</span>, <span class="number">48</span>, <span class="number">49</span>, <span class="number">50</span>, <span class="number">51</span>, <span class="number">52</span>, <span class="number">53</span>, </span><br><span class="line"><span class="number">30</span>, <span class="number">31</span>, <span class="number">32</span>, <span class="number">33</span>, <span class="number">34</span>, <span class="number">35</span>, <span class="number">36</span>, <span class="number">37</span>, <span class="number">114</span>, <span class="number">117</span>, <span class="number">120</span>, <span class="number">123</span>, <span class="number">126</span>, <span class="number">129</span>, <span class="number">132</span>, <span class="number">135</span>, <span class="number">46</span>, <span class="number">47</span>, <span class="number">48</span>, <span class="number">49</span>, <span class="number">50</span>, <span class="number">51</span>, <span class="number">52</span>, <span class="number">53</span>, <span class="number">54</span>, </span><br><span class="line"><span class="number">31</span>, <span class="number">32</span>, <span class="number">33</span>, <span class="number">34</span>, <span class="number">35</span>, <span class="number">36</span>, <span class="number">37</span>, <span class="number">38</span>, <span class="number">117</span>, <span class="number">120</span>, <span class="number">123</span>, <span class="number">126</span>, <span class="number">129</span>, <span class="number">132</span>, <span class="number">135</span>, <span class="number">138</span>, <span class="number">47</span>, <span class="number">48</span>, <span class="number">49</span>, <span class="number">50</span>, <span class="number">51</span>, <span class="number">52</span>, <span class="number">53</span>, <span class="number">54</span>, <span class="number">55</span>, </span><br><span class="line"><span class="number">32</span>, <span class="number">33</span>, <span class="number">34</span>, <span class="number">35</span>, <span class="number">36</span>, <span class="number">37</span>, <span class="number">38</span>, <span class="number">39</span>, <span class="number">120</span>, <span class="number">123</span>, <span class="number">126</span>, <span class="number">129</span>, <span class="number">132</span>, <span class="number">135</span>, <span class="number">138</span>, <span class="number">141</span>, <span class="number">48</span>, <span class="number">49</span>, <span class="number">50</span>, <span class="number">51</span>, <span class="number">52</span>, <span class="number">53</span>, <span class="number">54</span>, <span class="number">55</span>, <span class="number">56</span>, </span><br><span class="line"><span class="number">33</span>, <span class="number">34</span>, <span class="number">35</span>, <span class="number">36</span>, <span class="number">37</span>, <span class="number">38</span>, <span class="number">39</span>, <span class="number">40</span>, <span class="number">123</span>, <span class="number">126</span>, <span class="number">129</span>, <span class="number">132</span>, <span class="number">135</span>, <span class="number">138</span>, <span class="number">141</span>, <span class="number">144</span>, <span class="number">49</span>, <span class="number">50</span>, <span class="number">51</span>, <span class="number">52</span>, <span class="number">53</span>, <span class="number">54</span>, <span class="number">55</span>, <span class="number">56</span>, <span class="number">57</span>, </span><br><span class="line"><span class="number">34</span>, <span class="number">35</span>, <span class="number">36</span>, <span class="number">37</span>, <span class="number">38</span>, <span class="number">39</span>, <span class="number">40</span>, <span class="number">41</span>, <span class="number">126</span>, <span class="number">129</span>, <span class="number">132</span>, <span class="number">135</span>, <span class="number">138</span>, <span class="number">141</span>, <span class="number">144</span>, <span class="number">147</span>, <span class="number">50</span>, <span class="number">51</span>, <span class="number">52</span>, <span class="number">53</span>, <span class="number">54</span>, <span class="number">55</span>, <span class="number">56</span>, <span class="number">57</span>, <span class="number">58</span>, </span><br><span class="line"><span class="number">35</span>, <span class="number">36</span>, <span class="number">37</span>, <span class="number">38</span>, <span class="number">39</span>, <span class="number">40</span>, <span class="number">41</span>, <span class="number">42</span>, <span class="number">129</span>, <span class="number">132</span>, <span class="number">135</span>, <span class="number">138</span>, <span class="number">141</span>, <span class="number">144</span>, <span class="number">147</span>, <span class="number">150</span>, <span class="number">51</span>, <span class="number">52</span>, <span class="number">53</span>, <span class="number">54</span>, <span class="number">55</span>, <span class="number">56</span>, <span class="number">57</span>, <span class="number">58</span>, <span class="number">59</span>, </span><br><span class="line"><span class="number">36</span>, <span class="number">37</span>, <span class="number">38</span>, <span class="number">39</span>, <span class="number">40</span>, <span class="number">41</span>, <span class="number">42</span>, <span class="number">43</span>, <span class="number">132</span>, <span class="number">135</span>, <span class="number">138</span>, <span class="number">141</span>, <span class="number">144</span>, <span class="number">147</span>, <span class="number">150</span>, <span class="number">153</span>, <span class="number">52</span>, <span class="number">53</span>, <span class="number">54</span>, <span class="number">55</span>, <span class="number">56</span>, <span class="number">57</span>, <span class="number">58</span>, <span class="number">59</span>, <span class="number">60</span>, </span><br><span class="line"><span class="number">37</span>, <span class="number">38</span>, <span class="number">39</span>, <span class="number">40</span>, <span class="number">41</span>, <span class="number">42</span>, <span class="number">43</span>, <span class="number">44</span>, <span class="number">135</span>, <span class="number">138</span>, <span class="number">141</span>, <span class="number">144</span>, <span class="number">147</span>, <span class="number">150</span>, <span class="number">153</span>, <span class="number">156</span>, <span class="number">53</span>, <span class="number">54</span>, <span class="number">55</span>, <span class="number">56</span>, <span class="number">57</span>, <span class="number">58</span>, <span class="number">59</span>, <span class="number">60</span>, <span class="number">61</span>, </span><br><span class="line"><span class="number">38</span>, <span class="number">39</span>, <span class="number">40</span>, <span class="number">41</span>, <span class="number">42</span>, <span class="number">43</span>, <span class="number">44</span>, <span class="number">45</span>, <span class="number">138</span>, <span class="number">141</span>, <span class="number">144</span>, <span class="number">147</span>, <span class="number">150</span>, <span class="number">153</span>, <span class="number">156</span>, <span class="number">159</span>, <span class="number">54</span>, <span class="number">55</span>, <span class="number">56</span>, <span class="number">57</span>, <span class="number">58</span>, <span class="number">59</span>, <span class="number">60</span>, <span class="number">61</span>, <span class="number">62</span>, </span><br><span class="line"><span class="number">39</span>, <span class="number">40</span>, <span class="number">41</span>, <span class="number">42</span>, <span class="number">43</span>, <span class="number">44</span>, <span class="number">45</span>, <span class="number">46</span>, <span class="number">141</span>, <span class="number">144</span>, <span class="number">147</span>, <span class="number">150</span>, <span class="number">153</span>, <span class="number">156</span>, <span class="number">159</span>, <span class="number">162</span>, <span class="number">55</span>, <span class="number">56</span>, <span class="number">57</span>, <span class="number">58</span>, <span class="number">59</span>, <span class="number">60</span>, <span class="number">61</span>, <span class="number">62</span>, <span class="number">63</span>, </span><br><span class="line"><span class="number">40</span>, <span class="number">41</span>, <span class="number">42</span>, <span class="number">43</span>, <span class="number">44</span>, <span class="number">45</span>, <span class="number">46</span>, <span class="number">47</span>, <span class="number">144</span>, <span class="number">147</span>, <span class="number">150</span>, <span class="number">153</span>, <span class="number">156</span>, <span class="number">159</span>, <span class="number">162</span>, <span class="number">165</span>, <span class="number">56</span>, <span class="number">57</span>, <span class="number">58</span>, <span class="number">59</span>, <span class="number">60</span>, <span class="number">61</span>, <span class="number">62</span>, <span class="number">63</span>, <span class="number">64</span>, </span><br><span class="line"><span class="number">41</span>, <span class="number">42</span>, <span class="number">43</span>, <span class="number">44</span>, <span class="number">45</span>, <span class="number">46</span>, <span class="number">47</span>, <span class="number">48</span>, <span class="number">147</span>, <span class="number">150</span>, <span class="number">153</span>, <span class="number">156</span>, <span class="number">159</span>, <span class="number">162</span>, <span class="number">165</span>, <span class="number">168</span>, <span class="number">57</span>, <span class="number">58</span>, <span class="number">59</span>, <span class="number">60</span>, <span class="number">61</span>, <span class="number">62</span>, <span class="number">63</span>, <span class="number">64</span>, <span class="number">65</span>, </span><br><span class="line"><span class="number">42</span>, <span class="number">43</span>, <span class="number">44</span>, <span class="number">45</span>, <span class="number">46</span>, <span class="number">47</span>, <span class="number">48</span>, <span class="number">49</span>, <span class="number">150</span>, <span class="number">153</span>, <span class="number">156</span>, <span class="number">159</span>, <span class="number">162</span>, <span class="number">165</span>, <span class="number">168</span>, <span class="number">171</span>, <span class="number">58</span>, <span class="number">59</span>, <span class="number">60</span>, <span class="number">61</span>, <span class="number">62</span>, <span class="number">63</span>, <span class="number">64</span>, <span class="number">65</span>, <span class="number">66</span>, </span><br><span class="line"><span class="number">43</span>, <span class="number">44</span>, <span class="number">45</span>, <span class="number">46</span>, <span class="number">47</span>, <span class="number">48</span>, <span class="number">49</span>, <span class="number">50</span>, <span class="number">153</span>, <span class="number">156</span>, <span class="number">159</span>, <span class="number">162</span>, <span class="number">165</span>, <span class="number">168</span>, <span class="number">171</span>, <span class="number">174</span>, <span class="number">59</span>, <span class="number">60</span>, <span class="number">61</span>, <span class="number">62</span>, <span class="number">63</span>, <span class="number">64</span>, <span class="number">65</span>, <span class="number">66</span>, <span class="number">67</span>, </span><br><span class="line"><span class="number">44</span>, <span class="number">45</span>, <span class="number">46</span>, <span class="number">47</span>, <span class="number">48</span>, <span class="number">49</span>, <span class="number">50</span>, <span class="number">51</span>, <span class="number">156</span>, <span class="number">159</span>, <span class="number">162</span>, <span class="number">165</span>, <span class="number">168</span>, <span class="number">171</span>, <span class="number">174</span>, <span class="number">177</span>, <span class="number">60</span>, <span class="number">61</span>, <span class="number">62</span>, <span class="number">63</span>, <span class="number">64</span>, <span class="number">65</span>, <span class="number">66</span>, <span class="number">67</span>, <span class="number">68</span>, </span><br><span class="line"><span class="number">45</span>, <span class="number">46</span>, <span class="number">47</span>, <span class="number">48</span>, <span class="number">49</span>, <span class="number">50</span>, <span class="number">51</span>, <span class="number">52</span>, <span class="number">159</span>, <span class="number">162</span>, <span class="number">165</span>, <span class="number">168</span>, <span class="number">171</span>, <span class="number">174</span>, <span class="number">177</span>, <span class="number">180</span>, <span class="number">61</span>, <span class="number">62</span>, <span class="number">63</span>, <span class="number">64</span>, <span class="number">65</span>, <span class="number">66</span>, <span class="number">67</span>, <span class="number">68</span>, <span class="number">69</span>, </span><br><span class="line"><span class="number">46</span>, <span class="number">47</span>, <span class="number">48</span>, <span class="number">49</span>, <span class="number">50</span>, <span class="number">51</span>, <span class="number">52</span>, <span class="number">53</span>, <span class="number">162</span>, <span class="number">165</span>, <span class="number">168</span>, <span class="number">171</span>, <span class="number">174</span>, <span class="number">177</span>, <span class="number">180</span>, <span class="number">183</span>, <span class="number">62</span>, <span class="number">63</span>, <span class="number">64</span>, <span class="number">65</span>, <span class="number">66</span>, <span class="number">67</span>, <span class="number">68</span>, <span class="number">69</span>, <span class="number">70</span>, </span><br><span class="line"><span class="number">47</span>, <span class="number">48</span>, <span class="number">49</span>, <span class="number">50</span>, <span class="number">51</span>, <span class="number">52</span>, <span class="number">53</span>, <span class="number">54</span>, <span class="number">165</span>, <span class="number">168</span>, <span class="number">171</span>, <span class="number">174</span>, <span class="number">177</span>, <span class="number">180</span>, <span class="number">183</span>, <span class="number">186</span>, <span class="number">63</span>, <span class="number">64</span>, <span class="number">65</span>, <span class="number">66</span>, <span class="number">67</span>, <span class="number">68</span>, <span class="number">69</span>, <span class="number">70</span>, <span class="number">71</span>, </span><br><span class="line"><span class="number">48</span>, <span class="number">49</span>, <span class="number">50</span>, <span class="number">51</span>, <span class="number">52</span>, <span class="number">53</span>, <span class="number">54</span>, <span class="number">55</span>, <span class="number">168</span>, <span class="number">171</span>, <span class="number">174</span>, <span class="number">177</span>, <span class="number">180</span>, <span class="number">183</span>, <span class="number">186</span>, <span class="number">189</span>, <span class="number">64</span>, <span class="number">65</span>, <span class="number">66</span>, <span class="number">67</span>, <span class="number">68</span>, <span class="number">69</span>, <span class="number">70</span>, <span class="number">71</span>, <span class="number">72</span>, </span><br><span class="line"><span class="number">49</span>, <span class="number">50</span>, <span class="number">51</span>, <span class="number">52</span>, <span class="number">53</span>, <span class="number">54</span>, <span class="number">55</span>, <span class="number">56</span>, <span class="number">171</span>, <span class="number">174</span>, <span class="number">177</span>, <span class="number">180</span>, <span class="number">183</span>, <span class="number">186</span>, <span class="number">189</span>, <span class="number">192</span>, <span class="number">65</span>, <span class="number">66</span>, <span class="number">67</span>, <span class="number">68</span>, <span class="number">69</span>, <span class="number">70</span>, <span class="number">71</span>, <span class="number">72</span>, <span class="number">73</span>, </span><br><span class="line"><span class="number">50</span>, <span class="number">51</span>, <span class="number">52</span>, <span class="number">53</span>, <span class="number">54</span>, <span class="number">55</span>, <span class="number">56</span>, <span class="number">57</span>, <span class="number">174</span>, <span class="number">177</span>, <span class="number">180</span>, <span class="number">183</span>, <span class="number">186</span>, <span class="number">189</span>, <span class="number">192</span>, <span class="number">195</span>, <span class="number">66</span>, <span class="number">67</span>, <span class="number">68</span>, <span class="number">69</span>, <span class="number">70</span>, <span class="number">71</span>, <span class="number">72</span>, <span class="number">73</span>, <span class="number">74</span></span><br></pre></td></tr></table></figure></p>
<p>在经过公式(17)所示的Laplacian算子滤波后，结果变成下面这样：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">16</span> <span class="number">8</span> <span class="number">8</span> <span class="number">8</span> <span class="number">8</span> <span class="number">8</span> <span class="number">8</span> <span class="number">288</span> -<span class="number">248</span> <span class="number">24</span> <span class="number">24</span> <span class="number">24</span> <span class="number">24</span> <span class="number">24</span> <span class="number">24</span> -<span class="number">320</span> <span class="number">344</span> <span class="number">8</span> <span class="number">8</span> <span class="number">8</span> <span class="number">8</span> <span class="number">8</span> <span class="number">8</span> <span class="number">8</span> <span class="number">0</span> </span><br><span class="line"><span class="number">8</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">280</span> -<span class="number">272</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">344</span> <span class="number">336</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">8</span> </span><br><span class="line"><span class="number">8</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">288</span> -<span class="number">280</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">352</span> <span class="number">344</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">8</span> </span><br><span class="line"><span class="number">8</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">296</span> -<span class="number">288</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">360</span> <span class="number">352</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">8</span> </span><br><span class="line"><span class="number">8</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">304</span> -<span class="number">296</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">368</span> <span class="number">360</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">8</span> </span><br><span class="line"><span class="number">8</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">312</span> -<span class="number">304</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">376</span> <span class="number">368</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">8</span> </span><br><span class="line"><span class="number">8</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">320</span> -<span class="number">312</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">384</span> <span class="number">376</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">8</span> </span><br><span class="line"><span class="number">8</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">328</span> -<span class="number">320</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">392</span> <span class="number">384</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">8</span> </span><br><span class="line"><span class="number">8</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">336</span> -<span class="number">328</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">400</span> <span class="number">392</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">8</span> </span><br><span class="line"><span class="number">8</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">344</span> -<span class="number">336</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">408</span> <span class="number">400</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">8</span> </span><br><span class="line"><span class="number">8</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">352</span> -<span class="number">344</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">416</span> <span class="number">408</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">8</span> </span><br><span class="line"><span class="number">8</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">360</span> -<span class="number">352</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">424</span> <span class="number">416</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">8</span> </span><br><span class="line"><span class="number">8</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">368</span> -<span class="number">360</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">432</span> <span class="number">424</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">8</span> </span><br><span class="line"><span class="number">8</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">376</span> -<span class="number">368</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">440</span> <span class="number">432</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">8</span> </span><br><span class="line"><span class="number">8</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">384</span> -<span class="number">376</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">448</span> <span class="number">440</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">8</span> </span><br><span class="line"><span class="number">8</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">392</span> -<span class="number">384</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">456</span> <span class="number">448</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">8</span> </span><br><span class="line"><span class="number">8</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">400</span> -<span class="number">392</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">464</span> <span class="number">456</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">8</span> </span><br><span class="line"><span class="number">8</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">408</span> -<span class="number">400</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">472</span> <span class="number">464</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">8</span> </span><br><span class="line"><span class="number">8</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">416</span> -<span class="number">408</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">480</span> <span class="number">472</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">8</span> </span><br><span class="line"><span class="number">8</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">424</span> -<span class="number">416</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">488</span> <span class="number">480</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">8</span> </span><br><span class="line"><span class="number">8</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">432</span> -<span class="number">424</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">496</span> <span class="number">488</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">8</span> </span><br><span class="line"><span class="number">8</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">440</span> -<span class="number">432</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">504</span> <span class="number">496</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">8</span> </span><br><span class="line"><span class="number">8</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">448</span> -<span class="number">440</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">512</span> <span class="number">504</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">8</span> </span><br><span class="line"><span class="number">8</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">456</span> -<span class="number">448</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">520</span> <span class="number">512</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">8</span> </span><br><span class="line"><span class="number">0</span> -<span class="number">8</span> -<span class="number">8</span> -<span class="number">8</span> -<span class="number">8</span> -<span class="number">8</span> -<span class="number">8</span> <span class="number">448</span> -<span class="number">472</span> -<span class="number">24</span> -<span class="number">24</span> -<span class="number">24</span> -<span class="number">24</span> -<span class="number">24</span> -<span class="number">24</span> -<span class="number">544</span> <span class="number">504</span> -<span class="number">8</span> -<span class="number">8</span> -<span class="number">8</span> -<span class="number">8</span> -<span class="number">8</span> -<span class="number">8</span> -<span class="number">8</span> -<span class="number">16</span></span><br></pre></td></tr></table></figure></p>
<p>　　上面的结果是用opencv 的函数<code>cv::Laplacian</code>函数，使用的核是3x3的，如公式(17)所示，如果你自己动手算一下，你会发现OpenCV出来的答案是自己手算的四倍，至于为啥没搞明白。当然我定义的数据类型是<code>CV_32F</code>不知道跟这有没有关系。</p>
<p>　　此外，OpenCV中对于二维核应该都给拆分成一维核来计算，从而节省计算量，如何获取。用<code>cv::getDerivKernels</code>:<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cv::Mat kx, ky;</span><br><span class="line">cv::getDerivKernels(kx, ky, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line"><span class="comment">// kx: 1 -2 1	</span></span><br><span class="line"><span class="comment">// ky: 1 -2 1</span></span><br></pre></td></tr></table></figure></p>
<p>　　如果把上述参数中的2换成1，就变成了sobel算子的核，2是2阶导数的意思(刚好是Laplacian算子)，1就代表1阶导数(刚好是sobel算子)。</p>
<p>　　此外，如果想增加图像对比度(图像增强)，可以使用这样的卷积核：</p>
<p>\begin{equation}<br>\begin{bmatrix}<br>0&amp;-1&amp;0 \\<br>-1&amp;5&amp;-1 \\<br>0&amp;-1&amp;0<br>\end{bmatrix}    \tag{20}<br>\end{equation}</p>
<p>　　即1减去Laplacian核，也就是原图像减去他的经过Laplacian算子操作后的结果。</p>
<p>　　书上还讲了一个如果去得到零交叉线的代码，即如果得到边缘，这里就不写了，想知道看书。</p>
<hr>
<p>END</p>

      
    </div>
    
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2015/11/09/151109-OpenCV-Transforming-Images-with-Morphological-Operations/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">OpenCV 学习笔记(5) Transforming Images with Morphological Operations</div>
      <strong class="article-nav-caption">></strong>
    </a>
  
</nav>

  
</article>


<div class="share">
	<!-- JiaThis Button BEGIN -->
	<div class="jiathis_style">
		<span class="jiathis_txt">分享到：</span>
		<a class="jiathis_button_tsina"></a>
		<a class="jiathis_button_cqq"></a>
		<a class="jiathis_button_douban"></a>
		<a class="jiathis_button_weixin"></a>
		<a class="jiathis_button_tumblr"></a>
		<a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
	</div>
	<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=1405949716054953" charset="utf-8"></script>
	<!-- JiaThis Button END -->
</div>



<div class="duoshuo">
	<!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key="151119-OpenCV-Filtering-the-Images" data-title="OpenCV 学习笔记(6) Filtering the Images" data-url="site:ocxsBlog.github.io/2015/11/19/151119-OpenCV-Filtering-the-Images/"></div>
	<!-- 多说评论框 end -->
	<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
	<script type="text/javascript">
	var duoshuoQuery = {short_name:"true"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
	<!-- 多说公共JS代码 end -->
</div>




</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2015 ocxs
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<div id="totop" style="position:fixed;bottom:100px;right:50px;cursor: pointer;">
<a title="返回顶部"><img src="/img/scrollup.png"/></a>
</div>
<script src="/js/totop.js"></script>
  </div>
</body>
</html>