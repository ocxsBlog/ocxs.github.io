<!doctype html>



  


<html class="theme-next muse use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"/>




  <link href="//fonts.googleapis.com/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">



<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=0.5.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Computer Vision,OpenCV," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=0.5.0" />






<meta name="description" content="In this chapter, we will cover:


Filtering images using low-pass filters
Filtering images using a median filter
Applying directional filters to detect edges
Computing the Laplacian of an image">
<meta property="og:type" content="article">
<meta property="og:title" content="OpenCV 学习笔记(6) Filtering the Images">
<meta property="og:url" content="site:ocxsBlog.github.io/2015/11/19/151119-OpenCV-Filtering-the-Images/index.html">
<meta property="og:site_name" content="Ocxs's blog">
<meta property="og:description" content="In this chapter, we will cover:


Filtering images using low-pass filters
Filtering images using a median filter
Applying directional filters to detect edges
Computing the Laplacian of an image">
<meta property="og:updated_time" content="1970-01-01T00:00:00.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="OpenCV 学习笔记(6) Filtering the Images">
<meta name="twitter:description" content="In this chapter, we will cover:


Filtering images using low-pass filters
Filtering images using a median filter
Applying directional filters to detect edges
Computing the Laplacian of an image">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: 'Author'
    }
  };
</script>

  <title> OpenCV 学习笔记(6) Filtering the Images | Ocxs's blog </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Ocxs's blog</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">To be better</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home fa-fw"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-th fa-fw"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-user fa-fw"></i> <br />
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive fa-fw"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-tags fa-fw"></i> <br />
            
            Tags
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                OpenCV 学习笔记(6) Filtering the Images
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-11-19T20:14:57+08:00" content="2015-11-19">
              2015-11-19
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/11/19/151119-OpenCV-Filtering-the-Images/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/11/19/151119-OpenCV-Filtering-the-Images/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>In this chapter, we will cover:</p>
<blockquote>
<ul>
<li>Filtering images using low-pass filters</li>
<li>Filtering images using a median filter</li>
<li>Applying directional filters to detect edges</li>
<li>Computing the Laplacian of an image<a id="more"></a>
</li>
</ul>
</blockquote>
<h1 id="Introduction"><strong>Introduction</strong></h1><p>　　Observing the frequency of those variations in an image constitutes another way of characterizing an image. This point of view is referred to as the <strong>frequency domain</strong>(频域), while characterizing an image by observing its gray-level distribution is referred to as the <strong>spatial domain</strong>(空间域).<br>　　由上面可知，频域是分析图像强度(intensity)的变化,空间域分析图像灰度的分布;那么在频域中去分析图像，高频信息是有图像强度的快速变化产生，一般对应图像的边缘信息，因为在边缘图像强度才会变化很快， 那么对应的低频信息多是图像中某一块区域，如上一章那个牛的图片中的背景区域，或者前景区域(牛)，不会陡变，所以是低频信息，但是从牛到背景的 这个边缘，就会发生陡变，那么对应高频。</p>
<p>　　图像是二维的，它包含垂直频率(垂直方向的变化)和水平频率(水平方向的变化)。</p>
<p>　　而滤波(Filtering)的作用就是增强部分频段，同时限制(或衰减)其他频段。<strong>Low-pass</strong>(低通)滤波器就是消除图像中高频信息，<strong>High-pass</strong>(高通)滤波器就是去除低频成分，让高频成分通过。</p>
<p>　　本章主要讲述用于图像处理的滤波器。</p>
<hr>
<h1 id="Filtering_images_using_low-pass_filters"><strong>Filtering images using low-pass filters</strong></h1><h2 id="箱式滤波器cv::blur"><strong>箱式滤波器cv::blur</strong></h2><p>　　如书上所说，low-pass滤波器去除高频信息，那么就是想降低图像变化的幅度。OpenCV中实现该功能的函数是<code>cv::blur</code>,作用是将每个像素替换为相邻矩形内像素的平均值，从而实现平滑。也称<code>cv::blur</code>为boxFilter(箱式滤波器)。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cv::blur(image, result, cv::Size(<span class="number">5</span>, <span class="number">5</span>), anchor, borderType);</span><br><span class="line">cv::boxFilter(image, result, src.type(), anchor, <span class="literal">true</span>, borderType);</span><br></pre></td></tr></table></figure></p>
<p>　　上面两个等价，当<code>cv::boxFilter</code>的第五个参数为true，第三个参数设定输出与输入类型一致，她就是均值滤波，第五个参数为false，则相当于把公式(1)前面的系数去掉，<code>cv::blur</code>第三个参数是定义kernel的大小，kernel是一个N*N的矩阵, 如公式(1)所示，anchor 默认是矩阵中心， See more in <a href="http://docs.opencv.org/2.4.9/modules/imgproc/doc/filtering.html?highlight=blur#blur" target="_blank" rel="external">cv::blur</a> and <a href="http://docs.opencv.org/2.4.9/modules/imgproc/doc/filtering.html#boxfilter" target="_blank" rel="external">cv::boxFilter</a>.</p>
<p>\begin{equation}<br>K=\frac{1}{ksize.width*ksize.height}<br>\begin{bmatrix}<br>1&amp;1&amp; \cdots &amp;1&amp;1&amp; \\<br>1&amp;1&amp; \cdots &amp;1&amp;1&amp; \\<br>&amp;&amp; \cdots \cdots \cdots &amp; \\<br>1&amp;1&amp; \cdots &amp;1&amp;1&amp;<br>\end{bmatrix}    \tag{1}<br>\end{equation} </p>
<h2 id="高斯滤波cv::GaussianBlur"><strong>高斯滤波cv::GaussianBlur</strong></h2><ul>
<li><strong>OpenCV 函数调用</strong></li>
</ul>
<p>　　 有些情况，需要对靠近的像素分配更多的权重，常用的加权方案是基于高斯函数(Gaussian Function),OpenCV中实现该功能的函数<code>cv::GaussianBlur</code>:<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cv::GaussianBlur(image,result,cv::Size(<span class="number">5</span>,<span class="number">5</span>),<span class="number">1.5</span>);</span><br></pre></td></tr></table></figure></p>
<ul>
<li><strong>数学原理</strong></li>
</ul>
<p>　　在高斯滤波器中，像素的权重和它离开中心像素点距离成正比。一维高斯函数的形式如公式(2)所示: </p>
<p>\begin{equation}<br>G(x) = Ae^{-x^2/2\sigma^2}    \tag{2}<br>\end{equation} </p>

　　二维高斯函数的形式如公式(3)所示:
\begin{equation}
G(x,y) = Ae^{- \left( \frac{{\left(x-{\mu}_{x} \right)}^{2}}{2{{\sigma}_{x}}^{2}} + \frac{{\left(y-{\mu}_{y} \right)}^{2}}{2{{\sigma}_{y}}^{2}}	\right)} \tag{3}
\end{equation} 

<p>　　归一化系数A使得不同权重之和为1，σ来控制高斯函数的高度(高斯函数就是以前学的正态分布的那个函数，所以正态分布也叫高斯分布)，这个值越大，生成的函数越平坦，越小，越抖。(可以说σ是描述数据分布的离散程度，σ越大，数据越分散，σ越小，数据越集中，而学正态分布也知道σ代表方差，方差小数据自然就集中的平均数μ附近，也恰好说明函数图像为何很抖)。<br>　　正太分布里有个3σ原则，也能说明为啥他能控制高斯函数的高度：P（μ-σ&lt;X≤μ+σ）=68.3%；P（μ-2σ&lt;X≤μ+2σ）=95.4%；P（μ-3σ&lt;X≤μ+3σ）=99.7%；  </p>
<p>　　OpenCV提供<code>cv::getGaussianKernel</code>函数根据提供的σ来计算系数：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cv::Mat gauss= cv::getGaussianKernel(<span class="number">9</span>,sigma,CV_32F);</span><br></pre></td></tr></table></figure></p>
<p>不同的σ计算出来的系数自然也就不一样，这里列出书上的例子：<br>(a)σ = 0.5<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">0.0</span> <span class="number">0.0</span> <span class="number">0.00026</span> <span class="number">0.10645</span> <span class="number">0.78657</span> <span class="number">0.10645</span> <span class="number">0.00026</span> <span class="number">0.0</span> <span class="number">0.0</span>]</span><br></pre></td></tr></table></figure></p>
<p>(b)σ = 1.5<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">0.00761</span> <span class="number">0.036075</span> <span class="number">0.10959</span> <span class="number">0.21345</span> <span class="number">0.26666</span> <span class="number">0.21345</span> <span class="number">0.10959</span> <span class="number">0.03608</span> <span class="number">0.00761</span> ]</span><br></pre></td></tr></table></figure></p>
<p>　　这里可以参考这篇文章：<a href="http://wenku.baidu.com/view/674d13c1d5bbfd0a7956738b.html" target="_blank" rel="external">深入剖析高斯滤波</a>，文中指出：</p>
<p>　　在图像处理中，高斯滤波一般有两种实现方式，一种是离散化的滑动窗口进行卷积运算，另一种是通过傅立叶变化来实现。最常见的就是第一种卷积核实现，只有当离散化的窗口非常大，计算非常耗时（这时可使用可分离滤波器）的情况下，可能会考虑基于傅里叶变换的实现方法。这里我们只讨论第一种方法。</p>
<p>　　我们可以看到这篇文章的那个图，二维高斯函数可以用matlab仿真出来，网上有许多这样的代码。文中说：离散化的主旨就是保留高斯函数中心能量最集中的中间部分，忽略四周能量很小的平坦区域。这就可以为离中心像素近的权重大，离得远的权重小。</p>
<ul>
<li>这里重点把文中的第三个问题摘抄出来：<strong>为什么使用可分离滤波器？</strong></li>
</ul>
<p>　　即书上为啥不直接用二维高斯函数来滤波，而是用一维高斯函数，先对图像的行用一维高斯滤波器(影响垂直方向的频率)，在对图像的列应用相同的一维高斯滤波器(影响的是水平方向的频率)，处理结果一样，利用的是高斯函数可以写成可分离的形式(Gaussian filter is a <strong>separable filter</strong>)，因此可以采用可分离滤波器实现来加速。所谓的可分离滤波器，就是可以把多维的卷积化成多个一维卷积。具体到二维的高斯滤波，就是指先对行做一维卷积，再对列做一维卷积。这样就可以将计算复杂度从O(M*M*N*N)降到O(2*M*M*N)，M，N分别是图像和滤波器的窗口大小，具体为啥如果以后回头看这篇文章的我想不出来先打自己一下，然后去看文章的链接。(对当初学信号与系统时的一些东西稍微理解的更深一点，以前只会计算题目。。。)</p>
<p>　　在OpenCV中可以调用<code>cv::sepFilter2D</code>来使用分离的滤波器，怎么使用，看一眼文档立马就会了，见<a href="http://docs.opencv.org/2.4.9/modules/imgproc/doc/filtering.html#sepfilter2d" target="_blank" rel="external">cv::sepFilter2D</a>.这里书上还说了一个函数<code>cv::filter2D</code>,可以使用它来直接进行二维滤波,具体使用见<a href="http://ocxsblog.github.io/2015/10/26/151026-OpenCV-Manipulating-the-pixels-2/">OpenCV 学习笔记(2) Manipulating the Pixels (下)</a>.<br>　　在使用<code>cv::GaussianBlur</code>函数时，第三个参数Size，<strong>长宽必须是奇数</strong>，此外，如果size为0，函数将根据第四个参数σ自动确定较为合适的系数的数量，至于怎么确定的，参考前面链接里的那篇文章，里面有把OPenCV源码拿出来讲解。此外，反过来提供尺寸的值，设置σ为0，函数也能自动确定较好的σ值。</p>
<h2 id="金字塔"><strong>金字塔</strong></h2><p>　　再将图像按照2的倍数缩放时，由于原来图像中的高频分量(如尖锐的边缘)在缩小图中可能呈现出楼梯状，造成失真，为了使缩小后没有这样的情况，那么就先对原图像进行低通滤波，然后在缩小，OpenCV就提供这样的函数，<code>cv::pyrDown</code>:<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cv::Mat reducedImage;</span><br><span class="line">cv::pyrDown(image, reducedImage);</span><br></pre></td></tr></table></figure></p>
<p>　　<code>cv::pyrDown</code>做了两件事，先对原图像进行低通滤波，然后隔行隔列的去除<strong>偶数行</strong>像素(官网说的，见<a href="http://docs.opencv.org/2.4.9/modules/imgproc/doc/filtering.html#pyrdown" target="_blank" rel="external">cv::pyrDown</a>)，缩小为原来的一半。与之对应的函数叫<code>cv::pyrUp</code>,他们经常用来创建图像金字塔(<strong>image pyramids</strong>)。<strong>常常用于高效的图像分析</strong>，例如想要检测图像中的物体，首先在金字塔顶层的小尺寸图像进行检测，然后定位感兴趣的物体，并在包含高分辨图像的低层金字塔中进行更精确的搜索。此外改变图像尺寸也可以使用<code>cv::resize</code>.</p>
<hr>
<h1 id="Filtering_images_using_a_median_filter"><strong>Filtering images using a median filter</strong></h1><p>　　上一节说的都隶属于线性滤波器的范畴，这一节的中值滤波器就是非线性滤波器。中值滤波器对去除椒盐噪点(Salt-and-Pepper,前面的章节讲过)很有帮助，OpenCV的函数是<code>cv::medianBlur</code>:<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cv::medianBlur(image, result, <span class="number">5</span>);</span><br></pre></td></tr></table></figure></p>
<p>　　由于他是非线性的，无法表示成之前的矩阵形式(因为取中位数，不确定性)，她就是用相邻区域内的中值来替代当前的像素值。这也是为啥能对付椒盐噪点，突然冒出来的黑色或白色必然不会是中位数，早晚被替换掉，因为噪点只能改变平均数，但是改变不了中位数，除非他们聚集在一起很多，不过这也可能就不是噪点了。函数的第三个参数是确定相邻区域的大小(kSize*ksize的区域)，必须是<strong>大于1且为奇数</strong>。中值滤波同时还具有保留边缘锐利度的优点，还能去除相同区域中的纹理。(这里还需注意使用medianBlur的时候，需要注意输入的要求，具体见<a href="http://docs.opencv.org/2.4.9/modules/imgproc/doc/filtering.html?highlight=medianblur#cv2.medianBlur" target="_blank" rel="external">cv::medianBlur</a>)</p>
<hr>
<h1 id="Applying_directional_filters_to_detect_edges"><strong>Applying directional filters to detect edges</strong></h1><p>　　之前主要讲的是低通滤波，接下来说高通滤波，经常用来做边缘检测(<strong>edge detection</strong>);</p>
<h2 id="Sobel算子"><strong>Sobel算子</strong></h2><h3 id="示例"><strong>示例</strong></h3><p>　　具有方向性，根据使用的kernel的不同，只改变图像的水平或垂直频率。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Sobel</span><span class="params">(InputArray src, OutputArray dst, <span class="keyword">int</span> ddepth, <span class="keyword">int</span> dx, <span class="keyword">int</span> dy, <span class="keyword">int</span> ksize=<span class="number">3</span>, <span class="keyword">double</span> scale=<span class="number">1</span>, <span class="keyword">double</span> delta=<span class="number">0</span>, <span class="keyword">int</span> borderType=BORDER_DEFAULT )</span></span>;</span><br></pre></td></tr></table></figure></p>
<p>　　<code>dx=1,dy=0</code>是针对水平方向的滤波，<code>dx=0,dy=1</code>是针对垂直方向的滤波；ksize必须是1，3，5 or 7，当是1时，代表一维的意思，即3x1或1x3的核,如[-1, 0, 1] 和 [-1, 0, 1]的转置，其他数字代表的就是ksize*ksize的核；其他比如输出的类型等等具体参考 <a href="http://docs.opencv.org/2.4.9/modules/imgproc/doc/filtering.html#sobel" target="_blank" rel="external">cv::Sobel</a>.</p>
<p>　　书上给的例子还是蛮好玩的，<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cv::Sobel(image,sobelX,CV_8U,<span class="number">1</span>,<span class="number">0</span>,<span class="number">3</span>,<span class="number">0.4</span>,<span class="number">128</span>);	<span class="comment">//horizontal directions.</span></span><br><span class="line">cv::Sobel(image,sobelY,CV_8U,<span class="number">0</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">0.4</span>,<span class="number">128</span>);	<span class="comment">//vertical directions.</span></span><br></pre></td></tr></table></figure></p>
<p>　　有意思的是后面的偏移量，将本来的得到的负值变成了低于128的正值，而原本的正值变成大于128的正值，这样的结果看起来有种书上所说的浮雕特效。</p>
<p>　　书上又给了一个将水平和垂直方向结合的例子：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Compute norm of Sobel</span></span><br><span class="line">cv::Sobel(image,sobelX,CV_16S,<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line">cv::Sobel(image,sobelY,CV_16S,<span class="number">0</span>,<span class="number">1</span>);</span><br><span class="line">cv::Mat sobel;</span><br><span class="line"><span class="comment">//compute the L1 norm</span></span><br><span class="line">sobel= <span class="built_in">abs</span>(sobelX)+<span class="built_in">abs</span>(sobelY);</span><br><span class="line"></span><br><span class="line"><span class="keyword">double</span> sobmin, sobmax;</span><br><span class="line">cv::minMaxLoc(sobel,&amp;sobmin,&amp;sobmax);</span><br><span class="line"><span class="comment">// Conversion to 8-bit image</span></span><br><span class="line"><span class="comment">// sobelImage = -alpha*sobel + 255</span></span><br><span class="line">cv::Mat sobelImage;</span><br><span class="line">sobel.convertTo(sobelImage,CV_8U,-<span class="number">255.</span>/sobmax,<span class="number">255</span>);</span><br></pre></td></tr></table></figure></p>
<p>　　得到的结果还是挺美的，通过convertTo将所有的值映射到0~255范围内。从这幅图像就能看出为何将其边缘检测器。</p>
<hr>
<h3 id="作用原理"><strong>作用原理</strong></h3><p>　　sobel 算子3x3的核如下公式(3):水平方向，(4):垂直方向 所示：</p>
<p>\begin{equation}<br>horizontal(kernel) =<br>\begin{bmatrix}<br>-1&amp;0&amp;1 \\<br>-2&amp;0&amp;2 \\<br>-1&amp;0&amp;1<br>\end{bmatrix}    \tag{3}<br>\end{equation} </p>
<p>\begin{equation}<br>vertical(kernel) =<br>\begin{bmatrix}<br>-1&amp;-2&amp;-1 \\<br>0&amp;0&amp;0 \\<br>1&amp;2&amp;1<br>\end{bmatrix}    \tag{4}<br>\end{equation} </p>
<p>　　sobel算子可以认为是用来测量图像垂直和水平方向变化，这种变化叫梯度(gradient).</p>
<p>\begin{equation}<br>grad(I) =<br>{\begin{bmatrix}<br>\frac{\partial I}{\partial x}, \frac{\partial I}{\partial y}<br>\end{bmatrix}}^\mathrm{T}    \tag{5}<br>\end{equation} </p>
<p>　　公式虽说是求偏导，实际就是像素值求差分，这里是一阶差分，举例说明如下，为了更好的说明问题，用矩阵来替代图像，这样更加直观，毕竟图像就是矩阵：</p>
<p>\begin{equation}<br>src =<br>\begin{bmatrix}<br>0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0 \\<br>0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0 \\<br>0&amp;0&amp;1&amp;1&amp;1&amp;1&amp;1&amp;0&amp;0 \\<br>0&amp;0&amp;1&amp;1&amp;1&amp;1&amp;1&amp;0&amp;0 \\<br>0&amp;0&amp;1&amp;1&amp;1&amp;1&amp;1&amp;0&amp;0 \\<br>0&amp;0&amp;1&amp;1&amp;1&amp;1&amp;1&amp;0&amp;0 \\<br>0&amp;0&amp;1&amp;1&amp;1&amp;1&amp;1&amp;0&amp;0 \\<br>0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0 \\<br>0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0<br>\end{bmatrix}    \tag{6}<br>\end{equation} </p>
<p>　　这里使用的sobel算子如公式(3)(4)所示，得到的结果分别如下(7)(8)所示：</p>
<p>\begin{equation}<br>dst_x =<br>\begin{bmatrix}<br>0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0 \\<br>0&amp;1&amp;1&amp;0&amp;0&amp;0&amp;-1&amp;-1&amp;0 \\<br>0&amp;3&amp;3&amp;0&amp;0&amp;0&amp;-3&amp;-3&amp;0 \\<br>0&amp;4&amp;4&amp;0&amp;0&amp;0&amp;-4&amp;-4&amp;0 \\<br>0&amp;4&amp;4&amp;0&amp;0&amp;0&amp;-4&amp;-4&amp;0 \\<br>0&amp;4&amp;4&amp;0&amp;0&amp;0&amp;-4&amp;-4&amp;0 \\<br>0&amp;3&amp;3&amp;0&amp;0&amp;0&amp;-3&amp;-3&amp;0 \\<br>0&amp;1&amp;1&amp;0&amp;0&amp;0&amp;-1&amp;-1&amp;0 \\<br>0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0<br>\end{bmatrix}    \tag{7}<br>\end{equation} </p>
<p>\begin{equation}<br>dst_y =<br>\begin{bmatrix}<br>0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0 \\<br>0&amp;1&amp;3&amp;4&amp;4&amp;4&amp;3&amp;1&amp;0 \\<br>0&amp;1&amp;3&amp;4&amp;4&amp;4&amp;3&amp;1&amp;0 \\<br>0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0 \\<br>0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0 \\<br>0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0 \\<br>0&amp;-1&amp;-3&amp;-4&amp;-4&amp;-4&amp;-3&amp;-1&amp;0 \\<br>0&amp;-1&amp;-3&amp;-4&amp;-4&amp;-4&amp;-3&amp;-1&amp;0 \\<br>0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0<br>\end{bmatrix}    \tag{8}<br>\end{equation} </p>
<p>　　就是将核与原图像做卷积，然后得到的值替换原像素值即可。从矩阵的结果中也能看出为何之前说有负值。</p>
<p>　　图像的梯度是一个二维向量，如公式(5)所示，它拥有距离和方向，梯度向量的距离通常给出变化的幅度，通常使用欧拉距离(也称L2 norm)：</p>
<p>\begin{equation}<br>\left|grad(I)\right| =<br>\sqrt{<br>{\left(\frac{\partial I}{\partial x}\right)}^2 + {\left(\frac{\partial I}{\partial y}\right)}^2<br>}    \tag{9}<br>\end{equation} </p>
<p>　　由于L2 norm的计算费时，所以经常有L1 norm替代，即取绝对值：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sobel= <span class="built_in">abs</span>(sobelX)+<span class="built_in">abs</span>(sobelY);</span><br></pre></td></tr></table></figure></p>
<p>　　梯度向量总是指向变化最剧烈的方向，在图像中， 这意味着梯度向量总是与边缘正交，从暗处指向亮出。梯度的方向是：</p>
<p>\begin{equation}<br>\angle grad(I) = arctan \left(-\frac{\partial I}{\partial y} \bigg/ \frac{\partial I}{\partial x} \right)    \tag{10}<br>\end{equation} </p>
<p>　　如果不仅需要计算距离，还需要方向，则用<code>cv::cartToPolar</code></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Sobel must be computed in floating points</span></span><br><span class="line">cv::Sobel(image,sobelX,CV_32F,<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line">cv::Sobel(image,sobelY,CV_32F,<span class="number">0</span>,<span class="number">1</span>);</span><br><span class="line"><span class="comment">// Compute the L2 norm and direction of the gradient</span></span><br><span class="line">cv::Mat norm, dir;</span><br><span class="line">cv::cartToPolar(sobelX,sobelY,norm,dir);</span><br></pre></td></tr></table></figure>
<p>　　这里默认方向的单位是弧度(from 0 to 2*Pi)，将额外的参数angleInDegrees设为true，即可得到角度(0 to 360 degrees), see more in <a href="http://docs.opencv.org/2.4.9/modules/core/doc/operations_on_arrays.html?highlight=carttopolar#void cartToPolar(InputArray x, InputArray y, OutputArray magnitude, OutputArray angle, bool angleInDegrees" target="_blank" rel="external">cv::cartToPolar</a>).</p>
<p>　　对于梯度图阈值化即可得到二值的边缘图，合适的阈值很难，一种可选的途径是磁滞阈值化(hysteresis thresholding)的概念,将canny算子会用到。</p>
<h2 id="其他的梯度算子"><strong>其他的梯度算子</strong></h2><h3 id="Prewitt_operator"><strong>Prewitt operator</strong></h3><p>\begin{equation}<br>horizontal(kernel) =<br>\begin{bmatrix}<br>-1&amp;0&amp;1 \\<br>-1&amp;0&amp;1 \\<br>-1&amp;0&amp;1<br>\end{bmatrix}    \tag{11}<br>\end{equation} </p>
<p>\begin{equation}<br>vertical(kernel) =<br>\begin{bmatrix}<br>-1&amp;-1&amp;-1 \\<br>0&amp;0&amp;0 \\<br>1&amp;1&amp;1<br>\end{bmatrix}    \tag{12}<br>\end{equation} </p>
<h3 id="Roberts_operator"><strong>Roberts operator</strong></h3><p>\begin{equation}<br>\begin{bmatrix}<br>1&amp;0 \\<br>0&amp;-1<br>\end{bmatrix}    \tag{13}<br>\end{equation} </p>
<p>\begin{equation}<br>\begin{bmatrix}<br>0&amp;1 \\<br>-1&amp;0<br>\end{bmatrix}    \tag{14}<br>\end{equation} </p>
<h3 id="Scharr_operator"><strong>Scharr operator</strong></h3><p>\begin{equation}<br>horizontal(kernel) =<br>\begin{bmatrix}<br>-3&amp;0&amp;3 \\<br>-10&amp;0&amp;10 \\<br>-3&amp;0&amp;3<br>\end{bmatrix}    \tag{15}<br>\end{equation} </p>
<p>\begin{equation}<br>vertical(kernel) =<br>\begin{bmatrix}<br>-3&amp;-10&amp;-3 \\<br>0&amp;0&amp;0 \\<br>3&amp;10&amp;3<br>\end{bmatrix}    \tag{16}<br>\end{equation} </p>
<p>　　当<code>cv::Sobel</code>的ksize参数为<code>CV_SCHARR</code>时,他们二者等价，如下所示：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cv::Sobel (image, sobelX,  CV_16S, <span class="number">1</span>, <span class="number">0</span>, CV_SCHARR);</span><br><span class="line">cv::Scharr(image, scharrX, CV_16S, <span class="number">1</span>, <span class="number">0</span>, <span class="number">3</span>);</span><br></pre></td></tr></table></figure></p>
<hr>
<h1 id="Computing_the_Laplacian_of_an_image"><strong>Computing the Laplacian of an image</strong></h1><p>　　Laplacian 是另一种基于图像导数的高通线性滤波器，他计算二阶导数以衡量图像的弯曲度，从而得到边缘。</p>
<h2 id="数学原理"><strong>数学原理</strong></h2><p>　　Laplacian算子是一种各向同性算子，二阶微分算子，在只关心边缘而不考虑其周围像素灰度差值时比较适合。Laplacian算子对孤立像素的响应比对边缘或线的响应更加强烈，这一点可参见公式(17)看出，所以适合无噪声图像，如果有噪声，应先进行低通滤波去噪，然后在应用Laplacian算子。</p>
<p>\begin{equation}<br>\begin{bmatrix}<br>0&amp;1&amp;0 \\<br>1&amp;-4&amp;1 \\<br>0&amp;1&amp;0<br>\end{bmatrix}    \tag{17}<br>\end{equation}</p>
<p>　　Laplacian算子具有旋转不变形，根据公式(17)的3x3的核，(一般如果我们不在意速度时，多用7x7核)我们可以定义：<br>\begin{equation}<br>\triangledown^{2} f(x,y)= {[f(x+1,y)-f(x,y)]-[f(x,y)-f(x-1,y)]}+{[f(x,y+1)-f(x,y)]-[f(x,y)-f(x,y-1)]} \\ = f(x+1,y)+f(x-1,y)+f(x,y+1)+f(x,y-1)-4f(x,y) \tag{18}<br>\end{equation}</p>
<p>　　公式(18)在图像处理中更好理解，在数学上，如下所示：</p>
<p>\begin{equation}<br>\triangledown^{2} f = \frac{\partial^{2} f}{\partial x^{2}}+\frac{\partial^{2} f}{\partial y^{2}} \tag{19}<br>\end{equation}</p>
<p>　　由于Laplacian算子度量的是图像的弯曲度(curvature)，所以在平坦区域等于0。</p>
<p>　　边缘的存在是不同灰度区域间快速过度的结果，沿着图像在一条边上的变化(例如， 从暗处到亮处)， 可以观察到灰度的提升意味着正曲率(强度值开始上升)到负曲率(当强度值到达最高值)的渐变。所以正负Laplacian算子值(或导数)是用来指示边缘存在的标志。书上那个图可以诠释这一点。</p>
<p>　　这里再来举个例子，帮助自己以后复习更快理解：<br>原矩阵如下：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">26</span>, <span class="number">27</span>, <span class="number">28</span>, <span class="number">29</span>, <span class="number">30</span>, <span class="number">31</span>, <span class="number">32</span>, <span class="number">33</span>, <span class="number">102</span>, <span class="number">105</span>, <span class="number">108</span>, <span class="number">111</span>, <span class="number">114</span>, <span class="number">117</span>, <span class="number">120</span>, <span class="number">123</span>, <span class="number">42</span>, <span class="number">43</span>, <span class="number">44</span>, <span class="number">45</span>, <span class="number">46</span>, <span class="number">47</span>, <span class="number">48</span>, <span class="number">49</span>, <span class="number">50</span>, </span><br><span class="line"><span class="number">27</span>, <span class="number">28</span>, <span class="number">29</span>, <span class="number">30</span>, <span class="number">31</span>, <span class="number">32</span>, <span class="number">33</span>, <span class="number">34</span>, <span class="number">105</span>, <span class="number">108</span>, <span class="number">111</span>, <span class="number">114</span>, <span class="number">117</span>, <span class="number">120</span>, <span class="number">123</span>, <span class="number">126</span>, <span class="number">43</span>, <span class="number">44</span>, <span class="number">45</span>, <span class="number">46</span>, <span class="number">47</span>, <span class="number">48</span>, <span class="number">49</span>, <span class="number">50</span>, <span class="number">51</span>, </span><br><span class="line"><span class="number">28</span>, <span class="number">29</span>, <span class="number">30</span>, <span class="number">31</span>, <span class="number">32</span>, <span class="number">33</span>, <span class="number">34</span>, <span class="number">35</span>, <span class="number">108</span>, <span class="number">111</span>, <span class="number">114</span>, <span class="number">117</span>, <span class="number">120</span>, <span class="number">123</span>, <span class="number">126</span>, <span class="number">129</span>, <span class="number">44</span>, <span class="number">45</span>, <span class="number">46</span>, <span class="number">47</span>, <span class="number">48</span>, <span class="number">49</span>, <span class="number">50</span>, <span class="number">51</span>, <span class="number">52</span>, </span><br><span class="line"><span class="number">29</span>, <span class="number">30</span>, <span class="number">31</span>, <span class="number">32</span>, <span class="number">33</span>, <span class="number">34</span>, <span class="number">35</span>, <span class="number">36</span>, <span class="number">111</span>, <span class="number">114</span>, <span class="number">117</span>, <span class="number">120</span>, <span class="number">123</span>, <span class="number">126</span>, <span class="number">129</span>, <span class="number">132</span>, <span class="number">45</span>, <span class="number">46</span>, <span class="number">47</span>, <span class="number">48</span>, <span class="number">49</span>, <span class="number">50</span>, <span class="number">51</span>, <span class="number">52</span>, <span class="number">53</span>, </span><br><span class="line"><span class="number">30</span>, <span class="number">31</span>, <span class="number">32</span>, <span class="number">33</span>, <span class="number">34</span>, <span class="number">35</span>, <span class="number">36</span>, <span class="number">37</span>, <span class="number">114</span>, <span class="number">117</span>, <span class="number">120</span>, <span class="number">123</span>, <span class="number">126</span>, <span class="number">129</span>, <span class="number">132</span>, <span class="number">135</span>, <span class="number">46</span>, <span class="number">47</span>, <span class="number">48</span>, <span class="number">49</span>, <span class="number">50</span>, <span class="number">51</span>, <span class="number">52</span>, <span class="number">53</span>, <span class="number">54</span>, </span><br><span class="line"><span class="number">31</span>, <span class="number">32</span>, <span class="number">33</span>, <span class="number">34</span>, <span class="number">35</span>, <span class="number">36</span>, <span class="number">37</span>, <span class="number">38</span>, <span class="number">117</span>, <span class="number">120</span>, <span class="number">123</span>, <span class="number">126</span>, <span class="number">129</span>, <span class="number">132</span>, <span class="number">135</span>, <span class="number">138</span>, <span class="number">47</span>, <span class="number">48</span>, <span class="number">49</span>, <span class="number">50</span>, <span class="number">51</span>, <span class="number">52</span>, <span class="number">53</span>, <span class="number">54</span>, <span class="number">55</span>, </span><br><span class="line"><span class="number">32</span>, <span class="number">33</span>, <span class="number">34</span>, <span class="number">35</span>, <span class="number">36</span>, <span class="number">37</span>, <span class="number">38</span>, <span class="number">39</span>, <span class="number">120</span>, <span class="number">123</span>, <span class="number">126</span>, <span class="number">129</span>, <span class="number">132</span>, <span class="number">135</span>, <span class="number">138</span>, <span class="number">141</span>, <span class="number">48</span>, <span class="number">49</span>, <span class="number">50</span>, <span class="number">51</span>, <span class="number">52</span>, <span class="number">53</span>, <span class="number">54</span>, <span class="number">55</span>, <span class="number">56</span>, </span><br><span class="line"><span class="number">33</span>, <span class="number">34</span>, <span class="number">35</span>, <span class="number">36</span>, <span class="number">37</span>, <span class="number">38</span>, <span class="number">39</span>, <span class="number">40</span>, <span class="number">123</span>, <span class="number">126</span>, <span class="number">129</span>, <span class="number">132</span>, <span class="number">135</span>, <span class="number">138</span>, <span class="number">141</span>, <span class="number">144</span>, <span class="number">49</span>, <span class="number">50</span>, <span class="number">51</span>, <span class="number">52</span>, <span class="number">53</span>, <span class="number">54</span>, <span class="number">55</span>, <span class="number">56</span>, <span class="number">57</span>, </span><br><span class="line"><span class="number">34</span>, <span class="number">35</span>, <span class="number">36</span>, <span class="number">37</span>, <span class="number">38</span>, <span class="number">39</span>, <span class="number">40</span>, <span class="number">41</span>, <span class="number">126</span>, <span class="number">129</span>, <span class="number">132</span>, <span class="number">135</span>, <span class="number">138</span>, <span class="number">141</span>, <span class="number">144</span>, <span class="number">147</span>, <span class="number">50</span>, <span class="number">51</span>, <span class="number">52</span>, <span class="number">53</span>, <span class="number">54</span>, <span class="number">55</span>, <span class="number">56</span>, <span class="number">57</span>, <span class="number">58</span>, </span><br><span class="line"><span class="number">35</span>, <span class="number">36</span>, <span class="number">37</span>, <span class="number">38</span>, <span class="number">39</span>, <span class="number">40</span>, <span class="number">41</span>, <span class="number">42</span>, <span class="number">129</span>, <span class="number">132</span>, <span class="number">135</span>, <span class="number">138</span>, <span class="number">141</span>, <span class="number">144</span>, <span class="number">147</span>, <span class="number">150</span>, <span class="number">51</span>, <span class="number">52</span>, <span class="number">53</span>, <span class="number">54</span>, <span class="number">55</span>, <span class="number">56</span>, <span class="number">57</span>, <span class="number">58</span>, <span class="number">59</span>, </span><br><span class="line"><span class="number">36</span>, <span class="number">37</span>, <span class="number">38</span>, <span class="number">39</span>, <span class="number">40</span>, <span class="number">41</span>, <span class="number">42</span>, <span class="number">43</span>, <span class="number">132</span>, <span class="number">135</span>, <span class="number">138</span>, <span class="number">141</span>, <span class="number">144</span>, <span class="number">147</span>, <span class="number">150</span>, <span class="number">153</span>, <span class="number">52</span>, <span class="number">53</span>, <span class="number">54</span>, <span class="number">55</span>, <span class="number">56</span>, <span class="number">57</span>, <span class="number">58</span>, <span class="number">59</span>, <span class="number">60</span>, </span><br><span class="line"><span class="number">37</span>, <span class="number">38</span>, <span class="number">39</span>, <span class="number">40</span>, <span class="number">41</span>, <span class="number">42</span>, <span class="number">43</span>, <span class="number">44</span>, <span class="number">135</span>, <span class="number">138</span>, <span class="number">141</span>, <span class="number">144</span>, <span class="number">147</span>, <span class="number">150</span>, <span class="number">153</span>, <span class="number">156</span>, <span class="number">53</span>, <span class="number">54</span>, <span class="number">55</span>, <span class="number">56</span>, <span class="number">57</span>, <span class="number">58</span>, <span class="number">59</span>, <span class="number">60</span>, <span class="number">61</span>, </span><br><span class="line"><span class="number">38</span>, <span class="number">39</span>, <span class="number">40</span>, <span class="number">41</span>, <span class="number">42</span>, <span class="number">43</span>, <span class="number">44</span>, <span class="number">45</span>, <span class="number">138</span>, <span class="number">141</span>, <span class="number">144</span>, <span class="number">147</span>, <span class="number">150</span>, <span class="number">153</span>, <span class="number">156</span>, <span class="number">159</span>, <span class="number">54</span>, <span class="number">55</span>, <span class="number">56</span>, <span class="number">57</span>, <span class="number">58</span>, <span class="number">59</span>, <span class="number">60</span>, <span class="number">61</span>, <span class="number">62</span>, </span><br><span class="line"><span class="number">39</span>, <span class="number">40</span>, <span class="number">41</span>, <span class="number">42</span>, <span class="number">43</span>, <span class="number">44</span>, <span class="number">45</span>, <span class="number">46</span>, <span class="number">141</span>, <span class="number">144</span>, <span class="number">147</span>, <span class="number">150</span>, <span class="number">153</span>, <span class="number">156</span>, <span class="number">159</span>, <span class="number">162</span>, <span class="number">55</span>, <span class="number">56</span>, <span class="number">57</span>, <span class="number">58</span>, <span class="number">59</span>, <span class="number">60</span>, <span class="number">61</span>, <span class="number">62</span>, <span class="number">63</span>, </span><br><span class="line"><span class="number">40</span>, <span class="number">41</span>, <span class="number">42</span>, <span class="number">43</span>, <span class="number">44</span>, <span class="number">45</span>, <span class="number">46</span>, <span class="number">47</span>, <span class="number">144</span>, <span class="number">147</span>, <span class="number">150</span>, <span class="number">153</span>, <span class="number">156</span>, <span class="number">159</span>, <span class="number">162</span>, <span class="number">165</span>, <span class="number">56</span>, <span class="number">57</span>, <span class="number">58</span>, <span class="number">59</span>, <span class="number">60</span>, <span class="number">61</span>, <span class="number">62</span>, <span class="number">63</span>, <span class="number">64</span>, </span><br><span class="line"><span class="number">41</span>, <span class="number">42</span>, <span class="number">43</span>, <span class="number">44</span>, <span class="number">45</span>, <span class="number">46</span>, <span class="number">47</span>, <span class="number">48</span>, <span class="number">147</span>, <span class="number">150</span>, <span class="number">153</span>, <span class="number">156</span>, <span class="number">159</span>, <span class="number">162</span>, <span class="number">165</span>, <span class="number">168</span>, <span class="number">57</span>, <span class="number">58</span>, <span class="number">59</span>, <span class="number">60</span>, <span class="number">61</span>, <span class="number">62</span>, <span class="number">63</span>, <span class="number">64</span>, <span class="number">65</span>, </span><br><span class="line"><span class="number">42</span>, <span class="number">43</span>, <span class="number">44</span>, <span class="number">45</span>, <span class="number">46</span>, <span class="number">47</span>, <span class="number">48</span>, <span class="number">49</span>, <span class="number">150</span>, <span class="number">153</span>, <span class="number">156</span>, <span class="number">159</span>, <span class="number">162</span>, <span class="number">165</span>, <span class="number">168</span>, <span class="number">171</span>, <span class="number">58</span>, <span class="number">59</span>, <span class="number">60</span>, <span class="number">61</span>, <span class="number">62</span>, <span class="number">63</span>, <span class="number">64</span>, <span class="number">65</span>, <span class="number">66</span>, </span><br><span class="line"><span class="number">43</span>, <span class="number">44</span>, <span class="number">45</span>, <span class="number">46</span>, <span class="number">47</span>, <span class="number">48</span>, <span class="number">49</span>, <span class="number">50</span>, <span class="number">153</span>, <span class="number">156</span>, <span class="number">159</span>, <span class="number">162</span>, <span class="number">165</span>, <span class="number">168</span>, <span class="number">171</span>, <span class="number">174</span>, <span class="number">59</span>, <span class="number">60</span>, <span class="number">61</span>, <span class="number">62</span>, <span class="number">63</span>, <span class="number">64</span>, <span class="number">65</span>, <span class="number">66</span>, <span class="number">67</span>, </span><br><span class="line"><span class="number">44</span>, <span class="number">45</span>, <span class="number">46</span>, <span class="number">47</span>, <span class="number">48</span>, <span class="number">49</span>, <span class="number">50</span>, <span class="number">51</span>, <span class="number">156</span>, <span class="number">159</span>, <span class="number">162</span>, <span class="number">165</span>, <span class="number">168</span>, <span class="number">171</span>, <span class="number">174</span>, <span class="number">177</span>, <span class="number">60</span>, <span class="number">61</span>, <span class="number">62</span>, <span class="number">63</span>, <span class="number">64</span>, <span class="number">65</span>, <span class="number">66</span>, <span class="number">67</span>, <span class="number">68</span>, </span><br><span class="line"><span class="number">45</span>, <span class="number">46</span>, <span class="number">47</span>, <span class="number">48</span>, <span class="number">49</span>, <span class="number">50</span>, <span class="number">51</span>, <span class="number">52</span>, <span class="number">159</span>, <span class="number">162</span>, <span class="number">165</span>, <span class="number">168</span>, <span class="number">171</span>, <span class="number">174</span>, <span class="number">177</span>, <span class="number">180</span>, <span class="number">61</span>, <span class="number">62</span>, <span class="number">63</span>, <span class="number">64</span>, <span class="number">65</span>, <span class="number">66</span>, <span class="number">67</span>, <span class="number">68</span>, <span class="number">69</span>, </span><br><span class="line"><span class="number">46</span>, <span class="number">47</span>, <span class="number">48</span>, <span class="number">49</span>, <span class="number">50</span>, <span class="number">51</span>, <span class="number">52</span>, <span class="number">53</span>, <span class="number">162</span>, <span class="number">165</span>, <span class="number">168</span>, <span class="number">171</span>, <span class="number">174</span>, <span class="number">177</span>, <span class="number">180</span>, <span class="number">183</span>, <span class="number">62</span>, <span class="number">63</span>, <span class="number">64</span>, <span class="number">65</span>, <span class="number">66</span>, <span class="number">67</span>, <span class="number">68</span>, <span class="number">69</span>, <span class="number">70</span>, </span><br><span class="line"><span class="number">47</span>, <span class="number">48</span>, <span class="number">49</span>, <span class="number">50</span>, <span class="number">51</span>, <span class="number">52</span>, <span class="number">53</span>, <span class="number">54</span>, <span class="number">165</span>, <span class="number">168</span>, <span class="number">171</span>, <span class="number">174</span>, <span class="number">177</span>, <span class="number">180</span>, <span class="number">183</span>, <span class="number">186</span>, <span class="number">63</span>, <span class="number">64</span>, <span class="number">65</span>, <span class="number">66</span>, <span class="number">67</span>, <span class="number">68</span>, <span class="number">69</span>, <span class="number">70</span>, <span class="number">71</span>, </span><br><span class="line"><span class="number">48</span>, <span class="number">49</span>, <span class="number">50</span>, <span class="number">51</span>, <span class="number">52</span>, <span class="number">53</span>, <span class="number">54</span>, <span class="number">55</span>, <span class="number">168</span>, <span class="number">171</span>, <span class="number">174</span>, <span class="number">177</span>, <span class="number">180</span>, <span class="number">183</span>, <span class="number">186</span>, <span class="number">189</span>, <span class="number">64</span>, <span class="number">65</span>, <span class="number">66</span>, <span class="number">67</span>, <span class="number">68</span>, <span class="number">69</span>, <span class="number">70</span>, <span class="number">71</span>, <span class="number">72</span>, </span><br><span class="line"><span class="number">49</span>, <span class="number">50</span>, <span class="number">51</span>, <span class="number">52</span>, <span class="number">53</span>, <span class="number">54</span>, <span class="number">55</span>, <span class="number">56</span>, <span class="number">171</span>, <span class="number">174</span>, <span class="number">177</span>, <span class="number">180</span>, <span class="number">183</span>, <span class="number">186</span>, <span class="number">189</span>, <span class="number">192</span>, <span class="number">65</span>, <span class="number">66</span>, <span class="number">67</span>, <span class="number">68</span>, <span class="number">69</span>, <span class="number">70</span>, <span class="number">71</span>, <span class="number">72</span>, <span class="number">73</span>, </span><br><span class="line"><span class="number">50</span>, <span class="number">51</span>, <span class="number">52</span>, <span class="number">53</span>, <span class="number">54</span>, <span class="number">55</span>, <span class="number">56</span>, <span class="number">57</span>, <span class="number">174</span>, <span class="number">177</span>, <span class="number">180</span>, <span class="number">183</span>, <span class="number">186</span>, <span class="number">189</span>, <span class="number">192</span>, <span class="number">195</span>, <span class="number">66</span>, <span class="number">67</span>, <span class="number">68</span>, <span class="number">69</span>, <span class="number">70</span>, <span class="number">71</span>, <span class="number">72</span>, <span class="number">73</span>, <span class="number">74</span></span><br></pre></td></tr></table></figure></p>
<p>在经过公式(17)所示的Laplacian算子滤波后，结果变成下面这样：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">16</span> <span class="number">8</span> <span class="number">8</span> <span class="number">8</span> <span class="number">8</span> <span class="number">8</span> <span class="number">8</span> <span class="number">288</span> -<span class="number">248</span> <span class="number">24</span> <span class="number">24</span> <span class="number">24</span> <span class="number">24</span> <span class="number">24</span> <span class="number">24</span> -<span class="number">320</span> <span class="number">344</span> <span class="number">8</span> <span class="number">8</span> <span class="number">8</span> <span class="number">8</span> <span class="number">8</span> <span class="number">8</span> <span class="number">8</span> <span class="number">0</span> </span><br><span class="line"><span class="number">8</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">280</span> -<span class="number">272</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">344</span> <span class="number">336</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">8</span> </span><br><span class="line"><span class="number">8</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">288</span> -<span class="number">280</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">352</span> <span class="number">344</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">8</span> </span><br><span class="line"><span class="number">8</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">296</span> -<span class="number">288</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">360</span> <span class="number">352</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">8</span> </span><br><span class="line"><span class="number">8</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">304</span> -<span class="number">296</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">368</span> <span class="number">360</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">8</span> </span><br><span class="line"><span class="number">8</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">312</span> -<span class="number">304</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">376</span> <span class="number">368</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">8</span> </span><br><span class="line"><span class="number">8</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">320</span> -<span class="number">312</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">384</span> <span class="number">376</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">8</span> </span><br><span class="line"><span class="number">8</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">328</span> -<span class="number">320</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">392</span> <span class="number">384</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">8</span> </span><br><span class="line"><span class="number">8</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">336</span> -<span class="number">328</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">400</span> <span class="number">392</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">8</span> </span><br><span class="line"><span class="number">8</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">344</span> -<span class="number">336</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">408</span> <span class="number">400</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">8</span> </span><br><span class="line"><span class="number">8</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">352</span> -<span class="number">344</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">416</span> <span class="number">408</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">8</span> </span><br><span class="line"><span class="number">8</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">360</span> -<span class="number">352</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">424</span> <span class="number">416</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">8</span> </span><br><span class="line"><span class="number">8</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">368</span> -<span class="number">360</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">432</span> <span class="number">424</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">8</span> </span><br><span class="line"><span class="number">8</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">376</span> -<span class="number">368</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">440</span> <span class="number">432</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">8</span> </span><br><span class="line"><span class="number">8</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">384</span> -<span class="number">376</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">448</span> <span class="number">440</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">8</span> </span><br><span class="line"><span class="number">8</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">392</span> -<span class="number">384</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">456</span> <span class="number">448</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">8</span> </span><br><span class="line"><span class="number">8</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">400</span> -<span class="number">392</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">464</span> <span class="number">456</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">8</span> </span><br><span class="line"><span class="number">8</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">408</span> -<span class="number">400</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">472</span> <span class="number">464</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">8</span> </span><br><span class="line"><span class="number">8</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">416</span> -<span class="number">408</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">480</span> <span class="number">472</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">8</span> </span><br><span class="line"><span class="number">8</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">424</span> -<span class="number">416</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">488</span> <span class="number">480</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">8</span> </span><br><span class="line"><span class="number">8</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">432</span> -<span class="number">424</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">496</span> <span class="number">488</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">8</span> </span><br><span class="line"><span class="number">8</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">440</span> -<span class="number">432</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">504</span> <span class="number">496</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">8</span> </span><br><span class="line"><span class="number">8</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">448</span> -<span class="number">440</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">512</span> <span class="number">504</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">8</span> </span><br><span class="line"><span class="number">8</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">456</span> -<span class="number">448</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">520</span> <span class="number">512</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">8</span> </span><br><span class="line"><span class="number">0</span> -<span class="number">8</span> -<span class="number">8</span> -<span class="number">8</span> -<span class="number">8</span> -<span class="number">8</span> -<span class="number">8</span> <span class="number">448</span> -<span class="number">472</span> -<span class="number">24</span> -<span class="number">24</span> -<span class="number">24</span> -<span class="number">24</span> -<span class="number">24</span> -<span class="number">24</span> -<span class="number">544</span> <span class="number">504</span> -<span class="number">8</span> -<span class="number">8</span> -<span class="number">8</span> -<span class="number">8</span> -<span class="number">8</span> -<span class="number">8</span> -<span class="number">8</span> -<span class="number">16</span></span><br></pre></td></tr></table></figure></p>
<p>　　上面的结果是用opencv 的函数<code>cv::Laplacian</code>函数，使用的核是3x3的，如公式(17)所示，如果你自己动手算一下，你会发现OpenCV出来的答案是自己手算的四倍，<strong>至于为啥没搞明白</strong>,不过官网上定义的ksize=1时，核就是如公式(17)所示，可能是因为重复的原因，ksize=3就把相同的核得到的结果乘以4？决定不管这个，记住就ok了。当然我定义的数据类型是<code>CV_32F</code>不知道跟这有没有关系。</p>
<p>　　此外，OpenCV中对于二维核应该都给拆分成一维核来计算，从而节省计算量，如何获取。用<code>cv::getDerivKernels</code>:<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cv::Mat kx, ky;</span><br><span class="line">cv::getDerivKernels(kx, ky, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line"><span class="comment">// kx: 1 -2 1	</span></span><br><span class="line"><span class="comment">// ky: 1 -2 1</span></span><br></pre></td></tr></table></figure></p>
<p>　　如果把上述参数中的2换成1，就变成了sobel算子的核，2是2阶导数的意思(刚好是Laplacian算子)，1就代表1阶导数(刚好是sobel算子)。</p>
<p>　　此外，如果想增加图像对比度(图像增强)，可以使用这样的卷积核：</p>
<p>\begin{equation}<br>\begin{bmatrix}<br>0&amp;-1&amp;0 \\<br>-1&amp;5&amp;-1 \\<br>0&amp;-1&amp;0<br>\end{bmatrix}    \tag{20}<br>\end{equation}</p>
<p>　　即1减去Laplacian核，也就是原图像减去他的经过Laplacian算子操作后的结果。</p>
<p>　　书上还讲了一个如果去得到零交叉线的代码，即如果得到边缘，这里就不写了，想知道看书。</p>
<hr>
<p>END</p>

      
    </div>

    <div>
      
        
      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Computer-Vision/" rel="tag">#Computer Vision</a>
          
            <a href="/tags/OpenCV/" rel="tag">#OpenCV</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2015/11/09/151109-OpenCV-Transforming-Images-with-Morphological-Operations/" rel="next" title="OpenCV 学习笔记(5) Transforming Images with Morphological Operations">
                <i class="fa fa-chevron-left"></i> OpenCV 学习笔记(5) Transforming Images with Morphological Operations
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2015/12/06/151206-particle-filter/" rel="prev" title="Particle Filter">
                Particle Filter <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="2015/11/19/151119-OpenCV-Filtering-the-Images/"
           data-title="OpenCV 学习笔记(6) Filtering the Images" data-url="site:ocxsBlog.github.io/2015/11/19/151119-OpenCV-Filtering-the-Images/">
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            Overview
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/img/avatar.png"
               alt="Xusong Chen" />
          <p class="site-author-name" itemprop="name">Xusong Chen</p>
          <p class="site-description motion-element" itemprop="description">Welcome</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">36</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>

          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">11</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        <div class="links-of-blogroll motion-element">
          
        </div>

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Introduction"><span class="nav-number">1.</span> <span class="nav-text">Introduction</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Filtering_images_using_low-pass_filters"><span class="nav-number">2.</span> <span class="nav-text">Filtering images using low-pass filters</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#箱式滤波器cv::blur"><span class="nav-number">2.1.</span> <span class="nav-text">箱式滤波器cv::blur</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#高斯滤波cv::GaussianBlur"><span class="nav-number">2.2.</span> <span class="nav-text">高斯滤波cv::GaussianBlur</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#金字塔"><span class="nav-number">2.3.</span> <span class="nav-text">金字塔</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Filtering_images_using_a_median_filter"><span class="nav-number">3.</span> <span class="nav-text">Filtering images using a median filter</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Applying_directional_filters_to_detect_edges"><span class="nav-number">4.</span> <span class="nav-text">Applying directional filters to detect edges</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Sobel算子"><span class="nav-number">4.1.</span> <span class="nav-text">Sobel算子</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#示例"><span class="nav-number">4.1.1.</span> <span class="nav-text">示例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#作用原理"><span class="nav-number">4.1.2.</span> <span class="nav-text">作用原理</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#其他的梯度算子"><span class="nav-number">4.2.</span> <span class="nav-text">其他的梯度算子</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Prewitt_operator"><span class="nav-number">4.2.1.</span> <span class="nav-text">Prewitt operator</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Roberts_operator"><span class="nav-number">4.2.2.</span> <span class="nav-text">Roberts operator</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Scharr_operator"><span class="nav-number">4.2.3.</span> <span class="nav-text">Scharr operator</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Computing_the_Laplacian_of_an_image"><span class="nav-number">5.</span> <span class="nav-text">Computing the Laplacian of an image</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#数学原理"><span class="nav-number">5.1.</span> <span class="nav-text">数学原理</span></a></li></ol></li></ol></div>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Xusong Chen</span>
</div>

<div class="powered-by">
  Powered by <a class="theme-link" href="http://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>



      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  


  




<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>

  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=0.5.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=0.5.0"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=0.5.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=0.5.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=0.5.0"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"ocxsblog"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
  





  
  
  

  

  

</body>
</html>
